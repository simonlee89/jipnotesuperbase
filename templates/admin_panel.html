<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì íŒ¨ë„ - ì§‘ë…¸íŠ¸ CRM</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f8fafc;
            color: #1a202c;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .app-container {
            display: flex;
            height: 100vh;
        }
        
        /* ì‚¬ì´ë“œë°” */
        .sidebar {
            width: 260px;
            background: #ffffff;
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 1000;
        }
        
        .sidebar-header {
            padding: 24px 20px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: #1a202c;
        }
        
        .sidebar-nav {
            flex: 1;
            padding: 20px 0;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: #64748b;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }
        
        .nav-item:hover {
            background: #f1f5f9;
            color: #6366f1;
        }
        
        .nav-item.active {
            background: #f1f5f9;
            color: #6366f1;
            border-left-color: #6366f1;
        }
        
        .nav-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* ë©”ì¸ ì»¨í…ì¸  */
        .main-content {
            flex: 1;
            margin-left: 260px;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: #ffffff;
            border-bottom: 1px solid #e2e8f0;
            padding: 16px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .search-box {
            position: relative;
        }
        
        .search-input {
            width: 300px;
            padding: 10px 16px 10px 40px;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            background: #f8fafc;
            font-size: 14px;
            outline: none;
            transition: all 0.2s ease;
        }
        
        .search-input:focus {
            border-color: #6366f1;
            background: #ffffff;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        /* ì‚¬ì´íŠ¸ ì „í™˜ ë“œë¡­ë‹¤ìš´ */
        .site-switcher {
            position: relative;
        }
        
        .site-switcher-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3);
        }
        
        .site-switcher-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.4);
        }
        
        .site-switcher-btn::after {
            content: 'â–¼';
            font-size: 10px;
            margin-left: 4px;
            transition: transform 0.2s ease;
        }
        
        .site-switcher.active .site-switcher-btn::after {
            transform: rotate(180deg);
        }

        /* ëŒ€ì‹œë³´ë“œ í†µê³„ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .stat-title {
            font-size: 16px;
            font-weight: 600;
            color: #64748b;
            margin: 0;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 14px;
            color: #64748b;
        }

        /* í•„í„° ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .filter-section {
            padding: 16px 24px;
            border-bottom: 1px solid #e2e8f0;
            background: #ffffff;
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .filter-label {
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            white-space: nowrap;
        }

        .filter-buttons {
            display: flex;
            gap: 8px;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #e2e8f0;
            background: #ffffff;
            color: #64748b;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .filter-btn:hover {
            border-color: #6366f1;
            color: #6366f1;
        }

        .filter-btn.active {
            background: #6366f1;
            color: #ffffff;
            border-color: #6366f1;
        }

        /* í…Œì´ë¸” ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .table-container {
            overflow-x: auto;
            padding: 0 24px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 0;
        }

        .data-table th {
            background: #f8fafc;
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
        }

        .data-table td {
            padding: 16px 12px;
            border-bottom: 1px solid #f1f5f9;
            color: #374151;
            font-size: 14px;
        }

        .data-table tbody tr:hover {
            background: #f8fafc;
        }

        /* ìƒíƒœ ë°°ì§€ ìŠ¤íƒ€ì¼ */
        .status-badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            text-align: center;
            display: inline-block;
        }

        .status-badge.progress {
            background: #fef3c7;
            color: #f59e0b;
        }

        .status-badge.completed {
            background: #dcfce7;
            color: #16a34a;
        }

        .status-badge.pending {
            background: #f1f5f9;
            color: #64748b;
        }

        /* í˜ì´ì§€ë„¤ì´ì…˜ ìŠ¤íƒ€ì¼ */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-top: 24px;
            padding: 20px;
        }

        .pagination .btn {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            background: #ffffff;
            color: #64748b;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .pagination .btn:hover {
            border-color: #6366f1;
            color: #6366f1;
        }

        .pagination .btn.btn-primary {
            background: #6366f1;
            color: #ffffff;
            border-color: #6366f1;
        }
        
        .site-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            min-width: 220px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
            z-index: 1000;
        }
        
        .site-switcher.active .site-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .dropdown-header {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
            font-weight: 600;
            color: #1a202c;
            font-size: 14px;
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: #374151;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }
        
        .dropdown-item:hover {
            background: #f9fafb;
            color: #6366f1;
            border-left-color: #6366f1;
        }
        
        .dropdown-item .item-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }
        
        .dropdown-item .item-info {
            flex: 1;
        }
        
        .dropdown-item .item-title {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .dropdown-item .item-desc {
            font-size: 12px;
            color: #9ca3af;
        }
        
        .dropdown-item .item-badge {
            padding: 2px 8px;
            background: #fef3c7;
            color: #d97706;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .dropdown-item.residential .item-badge {
            background: #dbeafe;
            color: #2563eb;
        }
        
        .dropdown-item.business .item-badge {
            background: #fef3c7;
            color: #d97706;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            border-radius: 12px;
            background: #f8fafc;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }
        
        .user-info {
            display: flex;
            flex-direction: column;
        }
        
        .user-name {
            font-size: 14px;
            font-weight: 600;
            color: #1a202c;
        }
        
        .user-email {
            font-size: 12px;
            color: #64748b;
        }
        
        /* ì»¨í…ì¸  ì˜ì—­ */
        .content {
            flex: 1;
            padding: 32px;
            overflow-y: auto;
        }
        
        .page-header {
            margin-bottom: 32px;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 8px;
        }
        
        .page-subtitle {
            font-size: 16px;
            color: #64748b;
        }
        
        .card {
            background: #ffffff;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: between;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a202c;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .add-employee-form {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 16px;
            align-items: end;
            margin-bottom: 24px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-label {
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 6px;
        }
        
        .form-input, .form-select {
            padding: 14px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            font-size: 14px;
            background: #ffffff;
            transition: all 0.2s ease;
            outline: none;
        }
        
        .form-input:focus, .form-select:focus {
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .btn {
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }
        
        .btn-primary {
            background: #6366f1;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5855eb;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
        
        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
        }
        
        .btn-secondary:hover {
            background: #e2e8f0;
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        .btn-danger:hover {
            background: #dc2626;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
        }
        
        .btn-sm {
            padding: 8px 12px;
            font-size: 12px;
        }
        
        .filter-section {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .filter-label {
            font-size: 12px;
            font-weight: 500;
            color: #64748b;
        }
        
        .employees-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .employees-table th {
            background: #f8fafc;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            color: #374151;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .employees-table td {
            padding: 16px;
            border-bottom: 1px solid #f1f5f9;
            font-size: 14px;
        }
        
        .employees-table tr:hover {
            background: #f8fafc;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-progress {
            background: #fef3c7;
            color: #92400e;
        }
        
        .status-complete {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-hold {
            background: #fecaca;
            color: #991b1b;
        }
        
        .site-link {
            color: #3b82f6;
            text-decoration: none;
            font-size: 12px;
            padding: 2px 6px;
            border: 1px solid #3b82f6;
            border-radius: 4px;
            display: inline-block;
        }
        
        .site-link:hover {
            background: #3b82f6;
            color: white;
        }
        
        .status-active {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-inactive {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .alert {
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 24px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .alert-success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }
        
        .alert-error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }
        
        .loading {
            position: relative;
            color: transparent;
        }
        
        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffffff;
            animation: spin 1s ease-in-out infinite;
            transform: translate(-50%, -50%);
        }
        
        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- ì‚¬ì´ë“œë°” -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">ğŸ </div>
                    <div class="logo-text">ì§‘ë…¸íŠ¸ CRM</div>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="/admin" class="nav-item">
                    <div class="nav-icon">ğŸ“Š</div>
                    ê´€ë¦¬ì í™ˆ
                </a>
                <a href="#employee-section" class="nav-item active" onclick="activateEmployeeTab(event)">
                    <div class="nav-icon">ğŸ‘¥</div>
                    ì§ì› ê´€ë¦¬
                </a>
                <a href="#maeiple-section" class="nav-item" onclick="activateMaeipeTab(event)">
                    <div class="nav-icon">ğŸ¢</div>
                    ë©”ì´í”Œê´€ë¦¬
                </a>
                <a href="#team-leader-maeiple-section" class="nav-item" onclick="activateTeamLeaderMaeipleTab(event)" style="display:none;" id="team-leader-maeiple-nav">
                    <div class="nav-icon">ğŸ¢</div>
                    íŒ€ì¥ë©”ì´í”Œê´€ë¦¬
                </a>
                <a href="#dashboard-section" class="nav-item" onclick="activateDashboardTab(event)">
                    <div class="nav-icon">ğŸ‘¥</div>
                    ê³ ê° ê´€ë¦¬
                </a>
                <a href="#team-leader-customer-section" class="nav-item" onclick="activateTeamLeaderCustomerTab(event)" style="display:none;" id="team-leader-customer-nav">
                    <div class="nav-icon">ğŸ’¼</div>
                    íŒ€ì¥ê³ ê°ê´€ë¦¬
                </a>
                <a href="#guarantee-section" class="nav-item" onclick="activateGuaranteeTab(event)">
                    <div class="nav-icon">ğŸ›¡ï¸</div>
                    ë³´ì¦ë³´í—˜ ë§¤ë¬¼
                </a>
                <a href="/logout" class="nav-item">
                    <div class="nav-icon">ğŸšª</div>
                    ë¡œê·¸ì•„ì›ƒ
                </a>
            </nav>
        </div>
        
        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="main-content">
            <!-- í—¤ë” -->
            <div class="header">
                <div class="header-left">
                    <div class="search-box">
                        <div class="search-icon">ğŸ”</div>
                        <input type="text" class="search-input" placeholder="ì§ì› ê²€ìƒ‰...">
                    </div>
                </div>
                
                <div class="header-right">
                    <!-- ì‚¬ì´íŠ¸ ì „í™˜ ë“œë¡­ë‹¤ìš´ -->
                    <div class="site-switcher" id="site-switcher">
                        <button class="site-switcher-btn" onclick="toggleSiteSwitcher()">
                            <span>ğŸ¢</span>
                            ì‚¬ì´íŠ¸ ê´€ë¦¬
                        </button>
                        <div class="site-dropdown">
                            <div class="dropdown-header">ë§¤ë¬¼ ì‚¬ì´íŠ¸ ì „í™˜</div>
                            <a href="{{ residence_site_url }}" target="_blank" class="dropdown-item residence">
                                <div class="item-icon">ğŸ </div>
                                <div class="item-info">
                                    <div class="item-title">ì£¼ê±° ì‚¬ì´íŠ¸</div>
                                    <div class="item-desc">ì•„íŒŒíŠ¸, ì›ë£¸, ì˜¤í”¼ìŠ¤í…” ë“± ì£¼ê±°ìš© ë§¤ë¬¼</div>
                                </div>
                                <div class="item-badge">ì£¼ê±°ìš©</div>
                            </a>
                            <a href="{{ business_site_url }}" target="_blank" class="dropdown-item business">
                                <div class="item-icon">ğŸ¢</div>
                                <div class="item-info">
                                    <div class="item-title">ì—…ë¬´ ì‚¬ì´íŠ¸</div>
                                    <div class="item-desc">ì˜¤í”¼ìŠ¤, ìƒê°€, ì—…ë¬´ê³µê°„ ë§¤ë¬¼</div>
                                </div>
                                <div class="item-badge">ì—…ë¬´ìš©</div>
                            </a>
                        </div>
                    </div>
                    
                    <div class="user-profile">
                        <div class="user-avatar" id="user-avatar">ê´€</div>
                        <div class="user-info">
                            <div class="user-name" id="user-name">ê´€ë¦¬ì</div>
                            <div class="user-role" id="user-role">ê´€ë¦¬ì</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ì»¨í…ì¸  -->
            <div class="content">
                <div class="page-header">
                    <h1 class="page-title">ê´€ë¦¬ì íŒ¨ë„</h1>
                    <p class="page-subtitle">ì§ì› ê´€ë¦¬, ë³´ì¦ë³´í—˜ ë§¤ë¬¼ ë° ì‹œìŠ¤í…œ ê´€ë¦¬</p>
                </div>
                
                <!-- Flask Flash ë©”ì‹œì§€ í‘œì‹œ -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            {% if category == 'success' %}
                                <div class="alert alert-success" style="margin-bottom: 20px; padding: 16px; border-radius: 12px; background: #10b98126; border: 1px solid #10b981; color: #059669;">
                                    {{ message }}
                                </div>
                            {% else %}
                                <div class="alert alert-error" style="margin-bottom: 20px; padding: 16px; border-radius: 12px; background: #ef444426; border: 1px solid #ef4444; color: #dc2626;">
                                    {{ message }}
                                </div>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                {% endwith %}
                
                <div id="alert-container"></div>

                <!-- ì‚¬ì´ë“œë°” ë©”ë‰´ë¡œ íƒ­ ê¸°ëŠ¥ ëŒ€ì²´ -->

                <!-- ì§ì›ê´€ë¦¬ ì¹´ë“œ (íƒ­) -->
                <div id="employee-section">
                    <!-- ìƒˆ ì§ì› ì¶”ê°€ í† ê¸€ ë²„íŠ¼ -->
                    <button class="btn btn-primary" style="margin-bottom:12px; border-radius:10px; font-size:15px; padding:10px 18px; font-weight:600;" onclick="toggleAddEmployee()">
                        <span style="font-size:18px;">â•</span> ìƒˆ ì§ì› ì¶”ê°€
                    </button>
                    <!-- ìƒˆ ì§ì› ì¶”ê°€ ì¹´ë“œ (ê¸°ë³¸ ìˆ¨ê¹€) -->
                    <div class="card" id="add-employee-card" style="display:none; transition: max-height 0.3s; overflow:hidden;">
                        <div class="card-header">
                            <h2 class="card-title">
                                <span>â•</span>
                                ìƒˆ ì§ì› ì¶”ê°€
                            </h2>
                        </div>
                        <form id="add-employee-form" class="add-employee-form">
                            <div class="form-group">
                                <label class="form-label">ì§ì› ì•„ì´ë””</label>
                                <input type="text" id="employee_id" class="form-input" placeholder="ì§ì› ì•„ì´ë””" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ì§ì› ì´ë¦„</label>
                                <input type="text" id="employee_name" class="form-input" placeholder="ì§ì› ì´ë¦„" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">íŒ€</label>
                                <select id="team" class="form-input" required style="background: white; cursor: pointer;">
                                    <option value="">íŒ€ ì„ íƒ</option>
                                    <option value="ë¹ˆì‹œíŠ¸">ë¹ˆì‹œíŠ¸</option>
                                    <option value="ìœ„í”ŒëŸ¬ìŠ¤">ìœ„í”ŒëŸ¬ìŠ¤</option>
                                    <option value="ë°˜í´ë¦¬ì…°">ë°˜í´ë¦¬ì…°</option>
                                    <option value="ëŒ€í‘œ">ëŒ€í‘œ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ì—­í• </label>
                                <select id="employee_role" class="form-input" required style="background: white; cursor: pointer;">
                                    <option value="">ì—­í•  ì„ íƒ</option>
                                    <option value="íŒ€ì¥">íŒ€ì¥</option>
                                    <option value="ì§ì›">ì§ì›</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary" id="add-btn">
                                    <span>â•</span>
                                    ì§ì› ì¶”ê°€
                                </button>
                            </div>
                        </form>
                    </div>
                    <!-- ì§ì› ëª©ë¡ ì¹´ë“œ -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">
                                <span>ğŸ‘¥</span>
                                ì§ì› ëª©ë¡
                            </h2>
                        </div>
                        <!-- í•„í„° ì„¹ì…˜ -->
                        <div class="filter-section" style="display: flex; align-items: flex-end; gap: 20px; background: #f4f6fb; border-radius: 16px; border: 1px solid #e0e7ef; margin-bottom: 18px; padding: 18px 24px; box-shadow: 0 2px 8px rgba(99,102,241,0.04);">
                            <div class="filter-group" style="min-width: 80px;">
                                <label class="filter-label" style="font-size:13px; font-weight:600; color:#6366f1; margin-bottom:6px; display:flex; align-items:center; gap:6px;">
                                    <span style="font-size:16px;">ğŸ”</span> ìƒíƒœ
                                </label>
                                <select id="status-filter" class="form-select" style="width:80px; border-radius: 10px; border: 1.5px solid #c7d2fe; background: #fff; font-size:14px; padding:10px 14px;">
                                    <option value="">ì „ì²´</option>
                                    <option value="1">í™œì„±</option>
                                    <option value="0">ë¹„í™œì„±</option>
                                </select>
                            </div>
                            <div class="filter-group" style="min-width: 80px;">
                                <label class="filter-label" style="font-size:13px; font-weight:600; color:#6366f1; margin-bottom:6px; display:flex; align-items:center; gap:6px;">
                                    <span style="font-size:16px;">ğŸ‘¥</span> íŒ€
                                </label>
                                <select id="team-filter" class="form-select" style="width:80px; border-radius: 10px; border: 1.5px solid #c7d2fe; background: #fff; font-size:14px; padding:10px 14px;">
                                    <option value="">ì „ì²´ íŒ€</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-left:auto;">
                                <button type="button" class="btn btn-secondary" style="border-radius:10px; font-size:14px; padding:10px 18px; background:#e0e7ff; color:#3730a3; border:1.5px solid #c7d2fe; font-weight:600; display:flex; align-items:center; gap:6px;" onclick="loadEmployees()">
                                    <span style="font-size:16px;">ğŸ”„</span>
                                    ìƒˆë¡œê³ ì¹¨
                                </button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="employees-table">
                                <thead>
                                    <tr>
                                        <th>ì§ì› ì•„ì´ë””</th>
                                        <th>ì´ë¦„</th>
                                        <th>íŒ€</th>
                                        <th>ì—­í• </th>
                                        <th>ë“±ë¡ì¼</th>
                                        <th>ìƒíƒœ</th>
                                        <th>ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody id="employees-list">
                                    <!-- ì§ì› ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                                </tbody>
                            </table>
                                                </div>
                        
                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div id="employee-pagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; padding: 20px;">
                            <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>
                
                <!-- ë³´ì¦ë³´í—˜ ë§¤ë¬¼ ì¹´ë“œ (íƒ­) -->
                <div id="guarantee-section" style="display:none;">
                    <div class="card">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <h2 class="card-title">
                                <span>ğŸ›¡ï¸</span>
                                ë³´ì¦ë³´í—˜ ë§¤ë¬¼ ë¦¬ìŠ¤íŠ¸
                            </h2>
                            <div style="display: flex; gap: 16px; align-items: center;">
                                <span style="font-size: 14px; color: #64748b;">
                                    ì´ <strong style="color: #6366f1;">{{ guarantee_list|length if guarantee_list else 0 }}</strong>ê°œì˜ ë³´ì¦ë³´í—˜ ê°€ëŠ¥ ë§¤ë¬¼
                                </span>
                                <button type="button" class="btn btn-secondary btn-sm" onclick="location.reload()">
                                    <span>ğŸ”„</span> ìƒˆë¡œê³ ì¹¨
                                </button>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="employees-table">
                                <thead>
                                    <tr>
                                        <th>ë²ˆí˜¸</th>
                                        <th>URL</th>
                                        <th>í”Œë«í¼</th>
                                        <th>ë“±ë¡ì</th>
                                        <th>ë“±ë¡ì¼</th>
                                        <th>ë³´ì¦ë³´í—˜</th>
                                        <th>ë©”ëª¨</th>
                                        <th>ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% if guarantee_list and guarantee_list|length > 0 %}
                                        {% for row in guarantee_list %}
                                        <tr>
                                            <td>{{ loop.revindex }}</td>
                                            <td><a href="{{ row['url'] }}" target="_blank">{{ row['url'][:50] }}{% if row['url']|length > 50 %}...{% endif %}</a></td>
                                            <td>
                                                {% if row['platform'] == 'zigbang' %}
                                                    <span class="badge" style="background:#ff6b6b; color:white;">ì§ë°©</span>
                                                {% elif row['platform'] == 'naver' %}
                                                    <span class="badge" style="background:#03c75a; color:white;">ë„¤ì´ë²„</span>
                                                {% else %}
                                                    <span class="badge" style="background:#868e96; color:white;">{{ row['platform'] }}</span>
                                                {% endif %}
                                            </td>
                                            <td>{{ row['added_by'] }}</td>
                                            <td>{{ row['date_added'] }}</td>
                                            <td>
                                                <span class="badge" style="background:#22c55e; color:white;">
                                                    ğŸ›¡ï¸ ë³´ì¦ë³´í—˜ ê°€ëŠ¥
                                                </span>
                                            </td>
                                            <td>
                                                <form method="POST" action="{{ url_for('guarantee_edit', id=row['id']) }}" style="display:flex; gap:8px; align-items:center;">
                                                    <input type="text" name="memo" value="{{ row['memo'] or '' }}" placeholder="ë©”ëª¨ ì…ë ¥..." style="width:200px; padding:6px 10px; border:1px solid #e2e8f0; border-radius:8px; font-size:13px;">
                                                    <button type="submit" class="btn btn-sm btn-primary" style="display: flex; align-items: center; gap: 4px;">
                                                        <span>âœï¸</span> ìˆ˜ì •
                                                    </button>
                                                </form>
                                            </td>
                                            <td>
                                                <div style="display: flex; gap: 8px; align-items: center;">
                                                    <form method="POST" action="{{ url_for('guarantee_delete', id=row['id']) }}" style="display:inline;">
                                                        <button type="submit" class="btn btn-sm btn-danger" style="display: flex; align-items: center; gap: 4px;" onclick="return confirm('ì •ë§ë¡œ ì´ ë³´ì¦ë³´í—˜ ë§¤ë¬¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">
                                                            <span>ğŸ—‘ï¸</span> ì‚­ì œ
                                                        </button>
                                                    </form>
                                                </div>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    {% else %}
                                        <tr>
                                            <td colspan="8" style="text-align:center; color:#64748b; padding:40px;">
                                                <div style="font-size:16px; margin-bottom:8px;">ğŸ“‹ ë“±ë¡ëœ ë³´ì¦ë³´í—˜ ë§¤ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</div>
                                                <div style="font-size:14px; color:#94a3b8;">ì£¼ê±°ìš© ì‚¬ì´íŠ¸ì—ì„œ ë³´ì¦ë³´í—˜ ê°€ëŠ¥ ë§¤ë¬¼ì„ ë“±ë¡í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
                                            </td>
                                        </tr>
                                    {% endif %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ë©”ì´í”Œê´€ë¦¬ ì„¹ì…˜ (íƒ­) -->
                <div id="maeiple-section" style="display:none;">
                    <div class="card">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <h2 class="card-title">
                                <span>ğŸ¢</span>
                                ë©”ì´í”Œê´€ë¦¬ - ì•„íŒŒíŠ¸ëª©ë¡
                            </h2>
                            <button class="btn btn-primary" onclick="addNewPropertyRow()">+ ìƒˆ ë§¤ë¬¼ ì¶”ê°€</button>
                        </div>
                        
                        <!-- í•„í„° ì„¹ì…˜ -->
                        <div class="filter-section" style="padding: 12px 24px; border-bottom: 1px solid #e2e8f0; background: #ffffff; display: flex; gap: 24px; flex-wrap: wrap; align-items: center;">
                            <!-- í˜¸ìˆ˜ ê²€ìƒ‰ -->
                            <div class="filter-group">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">í˜¸ìˆ˜ ê²€ìƒ‰:</span>
                                <input type="text" id="room-search-admin" placeholder="í˜¸ìˆ˜ ì…ë ¥ (ì˜ˆ: 101, 102)" 
                                       style="padding: 6px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 12px; width: 120px;"
                                       oninput="filterByRoomAdmin(this.value)">
                            </div>
                            
                            <!-- ê±°ë˜ ìœ í˜• í•„í„° -->
                            <div class="filter-group" id="deal-type-filter-group-admin">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ê±°ë˜ìœ í˜•:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-value="all" onclick="setDealTypeFilterAdmin('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-value="ì „ì„¸" onclick="setDealTypeFilterAdmin('ì „ì„¸', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ì „ì„¸</button>
                                    <button class="filter-btn" data-value="ì›”ì„¸" onclick="setDealTypeFilterAdmin('ì›”ì„¸', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ì›”ì„¸</button>
                                    <button class="filter-btn" data-value="ë§¤ë§¤" onclick="setDealTypeFilterAdmin('ë§¤ë§¤', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë§¤ë§¤</button>
                                </div>
                            </div>
                            
                            <div class="filter-group" id="status-filter-group">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">í˜„í™©:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-value="all" onclick="setStatusFilter('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-value="ê±°ë˜ê°€ëŠ¥" onclick="setStatusFilter('ê±°ë˜ê°€ëŠ¥', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ê±°ë˜ê°€ëŠ¥</button>
                                    <button class="filter-btn" data-value="ê³„ì•½ì™„ë£Œ" onclick="setStatusFilter('ê³„ì•½ì™„ë£Œ', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ê³„ì•½ì™„ë£Œ</button>
                                    <button class="filter-btn" data-value="ë³´ë¥˜" onclick="setStatusFilter('ë³´ë¥˜', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë³´ë¥˜</button>
                                    <button class="filter-btn" data-value="ë¶€ì¬" onclick="setStatusFilter('ë¶€ì¬', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë¶€ì¬</button>
                                </div>
                            </div>
                            <div class="filter-group" id="occupied-filter-group">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ì‹¤ê±°ì£¼:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-value="all" onclick="setOccupiedFilter('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-value="O" onclick="setOccupiedFilter('O', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">O</button>
                                    <button class="filter-btn" data-value="X" onclick="setOccupiedFilter('X', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">X</button>
                                </div>
                            </div>
                            
                            <!-- ë‹´ë‹¹ì ê²€ìƒ‰ -->
                            <div class="filter-group">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ë‹´ë‹¹ì ê²€ìƒ‰:</span>
                                <input type="text" id="employee-search-admin" placeholder="ë‹´ë‹¹ì ì´ë¦„ ì…ë ¥" 
                                       style="padding: 6px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 12px; width: 120px;"
                                       oninput="filterByEmployeeAdmin(this.value)">
                            </div>
                            
                            <!-- íŒ€ í•„í„° -->
                            <div class="filter-group" id="team-filter-group-admin">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">íŒ€:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-value="all" onclick="setTeamFilterAdmin('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="maeiple-table-content">
                            <div class="loading" style="text-align: center; padding: 40px; color: #64748b;">ë¡œë”© ì¤‘...</div>
                        </div>
                        
                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div id="maeiple-pagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; padding: 20px;">
                            <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>

                <!-- íŒ€ì¥ë©”ì´í”Œê´€ë¦¬ ì„¹ì…˜ (íƒ­) -->
                <div id="team-maeiple-section" style="display:none;">
                    <!-- ë©”ì´í”Œìì´ í˜„í™© ì„¹ì…˜ -->
                    <div class="maeiple-section" style="margin-top: 20px; padding: 16px; background: #ffffff; border-radius: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); margin-bottom: 24px;">
                        <h3 class="section-title" style="font-size: 16px; font-weight: 600; color: #1a202c; margin-bottom: 16px; display: flex; align-items: center; gap: 6px;">ë©”ì´í”Œìì´</h3>
                        
                        <!-- ë©”ì´í”Œìì´ í†µê³„ ì¹´ë“œ -->
                        <div class="dashboard-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                            <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                                <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                    <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì´ ì•„íŒŒíŠ¸</h3>
                                    <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #f0f9ff; color: #0ea5e9;">ğŸ¢</div>
                                </div>
                                <div id="total-maeiple-team" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                                <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì „ì²´ ë“±ë¡</div>
                            </div>
                            <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                                <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                    <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ê±°ë˜ì¤‘</h3>
                                    <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #fefce8; color: #ca8a04;">ğŸ”„</div>
                                </div>
                                <div id="available-maeiple-team" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                                <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì§„í–‰ì¤‘</div>
                            </div>
                            <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                                <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                    <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ê±°ë˜ì™„ë£Œ</h3>
                                    <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #dcfce7; color: #16a34a;">âœ…</div>
                                </div>
                                <div id="completed-maeiple-team" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                                <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì™„ë£Œ</div>
                            </div>
                            <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                                <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                    <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì´ë²ˆ ì£¼ ì‹ ê·œ</h3>
                                    <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #fce7f3; color: #ec4899;">ğŸ“ˆ</div>
                                </div>
                                <div id="new-maeiple-team" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                                <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì‹ ê·œ ë“±ë¡</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <h2 class="card-title">
                                <span>ğŸ‘¥ğŸ¢</span>
                                íŒ€ì¥ë©”ì´í”Œê´€ë¦¬ - ìš°ë¦¬íŒ€ ë§¤ë¬¼ëª©ë¡
                            </h2>
                            <button class="btn btn-primary" onclick="addNewTeamPropertyRow()">+ ìƒˆ ë§¤ë¬¼ ì¶”ê°€</button>
                        </div>
                        
                        <!-- í•„í„° ì„¹ì…˜ -->
                        <div class="filter-section" style="padding: 12px 24px; border-bottom: 1px solid #e2e8f0; background: #ffffff; display: flex; gap: 24px; flex-wrap: wrap; align-items: center;">
                            <!-- í˜¸ìˆ˜ ê²€ìƒ‰ -->
                            <div class="filter-group">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">í˜¸ìˆ˜ ê²€ìƒ‰:</span>
                                <input type="text" id="room-search-team" placeholder="í˜¸ìˆ˜ ì…ë ¥ (ì˜ˆ: 101, 102)" 
                                       style="padding: 6px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 12px; width: 120px;"
                                       oninput="filterByRoomTeam(this.value)">
                            </div>
                            
                            <!-- ë‹´ë‹¹ì ê²€ìƒ‰ -->
                            <div class="filter-group">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ë‹´ë‹¹ì ê²€ìƒ‰:</span>
                                <input type="text" id="employee-search-team" placeholder="ë‹´ë‹¹ì ì´ë¦„ ì…ë ¥" 
                                       style="padding: 6px 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 12px; width: 120px;"
                                       oninput="filterByEmployeeTeam(this.value)">
                            </div>
                            
                            <!-- ê±°ë˜ ìœ í˜• í•„í„° -->
                            <div class="filter-group" id="deal-type-filter-group-team">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ê±°ë˜ìœ í˜•:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-value="all" onclick="setDealTypeFilterTeam('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-value="ì „ì„¸" onclick="setDealTypeFilterTeam('ì „ì„¸', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ì „ì„¸</button>
                                    <button class="filter-btn" data-value="ì›”ì„¸" onclick="setDealTypeFilterTeam('ì›”ì„¸', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ì›”ì„¸</button>
                                    <button class="filter-btn" data-value="ë§¤ë§¤" onclick="setDealTypeFilterTeam('ë§¤ë§¤', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë§¤ë§¤</button>
                                </div>
                            </div>
                            
                            <div class="filter-group" id="status-filter-group-team">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">í˜„í™©:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-value="all" onclick="setStatusFilterTeam('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-value="ê±°ë˜ê°€ëŠ¥" onclick="setStatusFilterTeam('ê±°ë˜ê°€ëŠ¥', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ê±°ë˜ê°€ëŠ¥</button>
                                    <button class="filter-btn" data-value="ê³„ì•½ì™„ë£Œ" onclick="setStatusFilterTeam('ê³„ì•½ì™„ë£Œ', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ê³„ì•½ì™„ë£Œ</button>
                                    <button class="filter-btn" data-value="ë³´ë¥˜" onclick="setStatusFilterTeam('ë³´ë¥˜', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë³´ë¥˜</button>
                                    <button class="filter-btn" data-value="ë¶€ì¬" onclick="setStatusFilterTeam('ë¶€ì¬', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë¶€ì¬</button>
                                </div>
                            </div>
                            <div class="filter-group" id="occupied-filter-group-team">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ì‹¤ê±°ì£¼:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-value="all" onclick="setOccupiedFilterTeam('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-value="O" onclick="setOccupiedFilterTeam('O', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">O</button>
                                    <button class="filter-btn" data-value="X" onclick="setOccupiedFilterTeam('X', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">X</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- í…Œì´ë¸” ì»¨í…Œì´ë„ˆ -->
                        <div class="table-container" style="background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); overflow: hidden;">
                            <table class="maeiple-table" style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">
                                            <div class="sort-header" onclick="sortTable('check_date', 'team')" style="display: flex; align-items: center; gap: 4px; cursor: pointer; user-select: none;">
                                                í™•ì¸ì¼
                                                <span class="sort-icon" style="font-size: 12px; color: #9ca3af; transition: color 0.2s ease;">â†•ï¸</span>
                                            </div>
                                        </th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">
                                            <div class="sort-header" onclick="sortTable('building_number', 'team')" style="display: flex; align-items: center; gap: 4px; cursor: pointer; user-select: none;">
                                                ë™
                                                <span class="sort-icon" style="font-size: 12px; color: #9ca3af; transition: color 0.2s ease;">â†•ï¸</span>
                                            </div>
                                        </th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">
                                            <div class="sort-header" onclick="sortTable('room_number', 'team')" style="display: flex; align-items: center; gap: 4px; cursor: pointer; user-select: none;">
                                                í˜¸ìˆ˜
                                                <span class="sort-icon" style="font-size: 12px; color: #9ca3af; transition: color 0.2s ease;">â†•ï¸</span>
                                            </div>
                                        </th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ìƒíƒœ</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì „ì„¸ê°€</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì›”ì„¸</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë§¤ë§¤ê°€</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì…ì£¼ì—¬ë¶€</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì—°ë½ì²˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë©”ëª¨</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì¢‹ì•„ìš”</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì‹«ì–´ìš”</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë‹´ë‹¹ì</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody id="team-maeiple-table-body">
                                    <!-- ë°ì´í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div id="team-maeiple-pagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; padding: 20px;">
                            <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>

                <!-- ì§ì› ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ (ê³ ê° ê´€ë¦¬) -->
                <div id="dashboard-section" style="display:none;">
                    <!-- í†µê³„ ì¹´ë“œ -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 24px; margin-bottom: 32px;">
                        <div class="card" style="padding: 24px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 style="font-size: 16px; font-weight: 600; color: #64748b;">ì´ê³ ê°</h3>
                                <div style="width: 40px; height: 40px; background: #eef2ff; color: #6366f1; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px;">ğŸ‘¥</div>
                            </div>
                            <div id="total-customers-admin" style="font-size: 32px; font-weight: 700; color: #1a202c; margin-bottom: 8px;">0</div>
                            <div style="font-size: 14px; color: #64748b;">ì „ì²´ ì§ì› ê³ ê°</div>
                        </div>
                        <div class="card" style="padding: 24px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 style="font-size: 16px; font-weight: 600; color: #64748b;">ì§„í–‰ì¤‘</h3>
                                <div style="width: 40px; height: 40px; background: #fef3c7; color: #f59e0b; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px;">â³</div>
                            </div>
                            <div id="progress-customers-admin" style="font-size: 32px; font-weight: 700; color: #1a202c; margin-bottom: 8px;">0</div>
                            <div style="font-size: 14px; color: #64748b;">ì§„í–‰ ì¤‘ì¸ ê³ ê°</div>
                        </div>
                        <div class="card" style="padding: 24px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 style="font-size: 16px; font-weight: 600; color: #64748b;">ê³„ì•½</h3>
                                <div style="width: 40px; height: 40px; background: #dcfce7; color: #16a34a; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px;">âœ…</div>
                            </div>
                            <div id="completed-customers-admin" style="font-size: 32px; font-weight: 700; color: #1a202c; margin-bottom: 8px;">0</div>
                            <div style="font-size: 14px; color: #64748b;">ê³„ì•½ ì™„ë£Œ ê³ ê°</div>
                        </div>
                        <div class="card" style="padding: 24px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 style="font-size: 16px; font-weight: 600; color: #64748b;">ì´ë²ˆ ì£¼ ì‹ ê·œ</h3>
                                <div style="width: 40px; height: 40px; background: #fce7f3; color: #ec4899; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px;">ğŸ“ˆ</div>
                            </div>
                            <div id="new-customers-admin" style="font-size: 32px; font-weight: 700; color: #1a202c; margin-bottom: 8px;">0</div>
                            <div style="font-size: 14px; color: #64748b;">ì‹ ê·œ ê³ ê°</div>
                        </div>
                    </div>

                    <!-- ê³ ê° ëª©ë¡ ì¹´ë“œ -->
                    <div class="card">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <h2 class="card-title">
                                <span>ğŸ‘¥</span>
                                ì „ì²´ ê³ ê° ëª©ë¡ (ëª¨ë“  ì§ì›)
                            </h2>
                            <button class="btn btn-primary" onclick="addNewCustomerRow()">+ ê³ ê° ì¶”ê°€</button>
                        </div>
                        
                        <!-- í•„í„° ì„¹ì…˜ -->
                        <div style="padding: 16px 24px; border-bottom: 1px solid #e2e8f0; display: flex; gap: 16px; flex-wrap: wrap; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="font-size: 14px; font-weight: 600; color: #64748b;">ìƒíƒœ:</span>
                                <div style="display: flex; gap: 6px;">
                                    <button class="customer-filter-btn active" data-status="all" onclick="setCustomerFilter('all', this)" style="padding: 6px 12px; border: 1px solid #e2e8f0; background: #6366f1; color: white; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 500;">ì „ì²´</button>
                                    <button class="customer-filter-btn" data-status="ìƒë‹´ì¤‘" onclick="setCustomerFilter('ìƒë‹´ì¤‘', this)" style="padding: 6px 12px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 20px; font-size: 12px; cursor: pointer;">ìƒë‹´ì¤‘</button>
                                    <button class="customer-filter-btn" data-status="ê³„ì•½" onclick="setCustomerFilter('ê³„ì•½', this)" style="padding: 6px 12px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 20px; font-size: 12px; cursor: pointer;">ê³„ì•½</button>
                                    <button class="customer-filter-btn" data-status="ë³´ë¥˜" onclick="setCustomerFilter('ë³´ë¥˜', this)" style="padding: 6px 12px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 20px; font-size: 12px; cursor: pointer;">ë³´ë¥˜</button>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="font-size: 14px; font-weight: 600; color: #64748b;">ë‹´ë‹¹ì:</span>
                                <select id="employee-filter" onchange="filterByEmployee()" style="padding: 6px 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 12px; background: white;">
                                    <option value="all">ì „ì²´ ì§ì›</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="customer-table-content">
                            <div class="loading" style="text-align: center; padding: 40px; color: #64748b;">ë¡œë”© ì¤‘...</div>
                        </div>
                        
                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div id="customer-pagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; padding: 20px;">
                            <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>

                <!-- íŒ€ì¥ ë³¸ì¸ ê³ ê°ê´€ë¦¬ ì„¹ì…˜ -->
                <div id="team-leader-customer-section" style="display:none;">
                    <!-- í†µê³„ ì¹´ë“œ -->
                    <div class="dashboard-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì´ ê³ ê°</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #eef2ff; color: #6366f1;">ğŸ‘¤</div>
                            </div>
                            <div id="total-customers-team-leader" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ë‚´ ë‹´ë‹¹ ê³ ê°</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì§„í–‰ì¤‘</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #fef3c7; color: #f59e0b;">â³</div>
                            </div>
                            <div id="progress-customers-team-leader" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì§„í–‰ ì¤‘ì¸ ê³ ê°</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ê³„ì•½</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #dcfce7; color: #16a34a;">âœ…</div>
                            </div>
                            <div id="completed-customers-team-leader" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ê³„ì•½ ì™„ë£Œ ê³ ê°</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì´ë²ˆ ì£¼ ì‹ ê·œ</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #fce7f3; color: #ec4899;">ğŸ“ˆ</div>
                            </div>
                            <div id="new-customers-team-leader" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì‹ ê·œ ê³ ê°</div>
                        </div>
                    </div>

                    <!-- íŒ€ì¥ ë³¸ì¸ ê³ ê° ëª©ë¡ ì¹´ë“œ -->
                    <div class="card">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <h2 class="card-title">
                                <span>ğŸ’¼</span>
                                íŒ€ì¥ ë³¸ì¸ ê³ ê° ëª©ë¡
                            </h2>
                            <button class="btn btn-primary" onclick="addNewTeamLeaderCustomerRow()">+ ê³ ê° ì¶”ê°€</button>
                        </div>
                        
                        <!-- í•„í„° ì„¹ì…˜ -->
                        <div class="filter-section" style="padding: 12px 24px; border-bottom: 1px solid #e2e8f0; background: #ffffff; display: flex; gap: 24px; flex-wrap: wrap; align-items: center;">
                            <div class="filter-group" style="display: flex; align-items: center; gap: 8px;">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ìƒíƒœ:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-status="all" onclick="setTeamLeaderCustomerFilter('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-status="ì§„í–‰ì¤‘" onclick="setTeamLeaderCustomerFilter('ì§„í–‰ì¤‘', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ì§„í–‰ì¤‘</button>
                                    <button class="filter-btn" data-status="ê³„ì•½" onclick="setTeamLeaderCustomerFilter('ê³„ì•½', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ê³„ì•½</button>
                                    <button class="filter-btn" data-status="ë³´ë¥˜" onclick="setTeamLeaderCustomerFilter('ë³´ë¥˜', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë³´ë¥˜</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- í…Œì´ë¸” ì»¨í…Œì´ë„ˆ -->
                        <div class="table-container" style="background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); overflow: hidden;">
                            <table class="data-table" style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë¬¸ì˜ì¼</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ê³ ê°ëª…</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì—°ë½ì²˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì˜ˆì‚°</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë°© ê°œìˆ˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ìœ„ì¹˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ëŒ€ì¶œ</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì£¼ì°¨</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">í«</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë©”ëª¨</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì§„í–‰ìƒíƒœ</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë‹´ë‹¹ì</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody id="team-leader-customer-table-body">
                                    <!-- ë°ì´í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div id="team-leader-customer-pagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; padding: 20px;">
                            <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>

                <!-- íŒ€ì¥ ë³¸ì¸ ë©”ì´í”Œê´€ë¦¬ ì„¹ì…˜ -->
                <div id="team-leader-maeiple-section" style="display:none;">
                    <!-- í†µê³„ ì¹´ë“œ -->
                    <div class="dashboard-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì´ ì•„íŒŒíŠ¸</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #f0f9ff; color: #0ea5e9;">ğŸ¢</div>
                            </div>
                            <div id="total-maeiple-team-leader" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ë‚´ ë‹´ë‹¹ ë§¤ë¬¼</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ê±°ë˜ì¤‘</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #fef3c7; color: #f59e0b;">â³</div>
                            </div>
                            <div id="available-maeiple-team-leader" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì§„í–‰ ì¤‘ì¸ ê±°ë˜</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ê±°ë˜ì™„ë£Œ</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #dcfce7; color: #16a34a;">âœ…</div>
                            </div>
                            <div id="completed-maeiple-team-leader" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì™„ë£Œëœ ê±°ë˜</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì´ë²ˆ ì£¼ ì‹ ê·œ</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #fce7f3; color: #ec4899;">ğŸ“ˆ</div>
                            </div>
                            <div id="new-maeiple-team-leader" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì‹ ê·œ ë“±ë¡</div>
                        </div>
                    </div>

                    <!-- íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ëª©ë¡ ì¹´ë“œ -->
                    <div class="card">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <h2 class="card-title">
                                <span>ğŸ¢</span>
                                íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ëª©ë¡
                            </h2>
                            <button class="btn btn-primary" onclick="addNewTeamLeaderMaeipleRow()">+ ë§¤ë¬¼ ì¶”ê°€</button>
                        </div>
                        
                        <!-- í•„í„° ì„¹ì…˜ -->
                        <div class="filter-section" style="padding: 12px 24px; border-bottom: 1px solid #e2e8f0; background: #ffffff; display: flex; gap: 24px; flex-wrap: wrap; align-items: center;">
                            <div class="filter-group" style="display: flex; align-items: center; gap: 8px;">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ìƒíƒœ:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-status="all" onclick="setTeamLeaderMaeipleFilter('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-status="ê±°ë˜ì¤‘" onclick="setTeamLeaderMaeipleFilter('ê±°ë˜ì¤‘', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ê±°ë˜ì¤‘</button>
                                    <button class="filter-btn" data-status="ê±°ë˜ì™„ë£Œ" onclick="setTeamLeaderMaeipleFilter('ê±°ë˜ì™„ë£Œ', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ê±°ë˜ì™„ë£Œ</button>
                                    <button class="filter-btn" data-status="ë³´ë¥˜" onclick="setTeamLeaderMaeipleFilter('ë³´ë¥˜', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë³´ë¥˜</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- í…Œì´ë¸” ì»¨í…Œì´ë„ˆ -->
                        <div class="table-container" style="background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); overflow: hidden;">
                            <table class="maeiple-table" style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">í™•ì¸ì¼</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë™</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">í˜¸ìˆ˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ìƒíƒœ</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì „ì„¸ê°€</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì›”ì„¸</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë§¤ë§¤ê°€</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì…ì£¼ì—¬ë¶€</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì—°ë½ì²˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë©”ëª¨</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì¢‹ì•„ìš”</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì‹«ì–´ìš”</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë‹´ë‹¹ì</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody id="team-leader-maeiple-table-body">
                                    <!-- ë°ì´í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div id="team-leader-maeiple-pagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; padding: 20px;">
                            <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>

                <!-- íŒ€ ì „ì²´ ê³ ê°ê´€ë¦¬ ì„¹ì…˜ -->
                <div id="team-customer-section" style="display:none;">
                    <!-- í†µê³„ ì¹´ë“œ -->
                    <div class="dashboard-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì´ ê³ ê°</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #eef2ff; color: #6366f1;">ğŸ‘¥</div>
                            </div>
                            <div id="total-customers-team" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">íŒ€ ì „ì²´ ê³ ê°</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì§„í–‰ì¤‘</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #fef3c7; color: #f59e0b;">â³</div>
                            </div>
                            <div id="progress-customers-team" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì§„í–‰ ì¤‘ì¸ ê³ ê°</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ê³„ì•½</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #dcfce7; color: #16a34a;">âœ…</div>
                            </div>
                            <div id="completed-customers-team" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ê³„ì•½ ì™„ë£Œ ê³ ê°</div>
                        </div>
                        <div class="stat-card" style="background: #ffffff; border-radius: 10px; padding: 12px; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);">
                            <div class="stat-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                                <h3 class="stat-title" style="font-size: 12px; font-weight: 500; color: #64748b;">ì´ë²ˆ ì£¼ ì‹ ê·œ</h3>
                                <div class="stat-icon" style="width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; background: #fce7f3; color: #ec4899;">ğŸ“ˆ</div>
                            </div>
                            <div id="new-customers-team" class="stat-value" style="font-size: 20px; font-weight: 700; color: #1a202c; margin-bottom: 4px;">0</div>
                            <div class="stat-change" style="font-size: 11px; font-weight: 500; color: #64748b;">ì‹ ê·œ ê³ ê°</div>
                        </div>
                    </div>

                    <!-- íŒ€ ì „ì²´ ê³ ê° ëª©ë¡ ì¹´ë“œ -->
                    <div class="card">
                        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <h2 class="card-title">
                                <span>ğŸ‘¥</span>
                                íŒ€ ì „ì²´ ê³ ê° ëª©ë¡ (íŒ€ì¥ + íŒ€ì›)
                            </h2>
                            <button class="btn btn-primary" onclick="addNewTeamCustomerRow()">+ ê³ ê° ì¶”ê°€</button>
                        </div>
                        
                        <!-- í•„í„° ì„¹ì…˜ -->
                        <div class="filter-section" style="padding: 12px 24px; border-bottom: 1px solid #e2e8f0; background: #ffffff; display: flex; gap: 24px; flex-wrap: wrap; align-items: center;">
                            <div class="filter-group" style="display: flex; align-items: center; gap: 8px;">
                                <span class="filter-label" style="color: #64748b; font-size: 13px; font-weight: 600; margin-right: 4px;">ìƒíƒœ:</span>
                                <div class="filter-buttons" style="display: flex; gap: 6px;">
                                    <button class="filter-btn active" data-status="all" onclick="setTeamCustomerFilter('all', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #e0e7ff; color: #4338ca; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: 600;">ì „ì²´</button>
                                    <button class="filter-btn" data-status="ì§„í–‰ì¤‘" onclick="setTeamCustomerFilter('ì§„í–‰ì¤‘', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ì§„í–‰ì¤‘</button>
                                    <button class="filter-btn" data-status="ê³„ì•½" onclick="setTeamCustomerFilter('ê³„ì•½', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ê³„ì•½</button>
                                    <button class="filter-btn" data-status="ë³´ë¥˜" onclick="setTeamCustomerFilter('ë³´ë¥˜', this)" style="padding: 6px 10px; border: 1px solid #e2e8f0; background: #ffffff; color: #334155; border-radius: 20px; font-size: 12px; cursor: pointer;">ë³´ë¥˜</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- í…Œì´ë¸” ì»¨í…Œì´ë„ˆ -->
                        <div class="table-container" style="background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); overflow: hidden;">
                            <table class="data-table" style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë¬¸ì˜ì¼</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ê³ ê°ëª…</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì—°ë½ì²˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì˜ˆì‚°</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë°© ê°œìˆ˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ìœ„ì¹˜</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ëŒ€ì¶œ</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì£¼ì°¨</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">í«</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë©”ëª¨</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì§„í–‰ìƒíƒœ</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ë‹´ë‹¹ì</th>
                                        <th style="background: #f8fafc; padding: 16px 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; font-size: 14px;">ì‘ì—…</th>
                                    </tr>
                                </thead>
                                <tbody id="team-customer-table-body">
                                    <!-- ë°ì´í„°ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                        <div id="team-customer-pagination" style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 20px; padding: 20px;">
                            <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë©”ëª¨ ëª¨ë‹¬ -->
    <div id="memoModal" class="modal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5);">
        <div class="modal-content" style="background-color: white; margin: 5% auto; padding: 24px; border-radius: 12px; width: 90%; max-width: 500px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);">
            <div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 class="modal-title" style="font-size: 20px; font-weight: 600; color: #1a202c;">íŠ¹ì´ì‚¬í•­ ë©”ëª¨</h3>
                <button class="close" onclick="closeMemoModal()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">&times;</button>
            </div>
            <textarea id="memoTextarea" class="memo-textarea" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." style="width: 100%; height: 120px; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px; resize: vertical; font-family: inherit;"></textarea>
            <div class="modal-actions" style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="closeMemoModal()" style="padding: 10px 20px; background: #6b7280; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer;">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="saveMemo()" style="padding: 10px 20px; background: #6366f1; color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer;">ì €ì¥</button>
            </div>
        </div>
    </div>

    <script>
        let employees = [];
        let currentEmployeePage = 1;
        let employeePerPage = 20;
        let employeeTotalPages = 0;
        
        // ë©”ì´í”Œê´€ë¦¬ ê´€ë ¨ ë³€ìˆ˜ë“¤
        let properties = [];
        let statusFilter = 'all';
        let occupiedFilter = 'all';
        let currentMaeiplePage = 1;
        let maeipePerPage = 20;
        let maeipleTotalPages = 0;
        let dealTypeFilterAdmin = 'all';
        let roomSearchFilterAdmin = '';
        let employeeSearchFilterAdmin = '';
        let teamFilterAdmin = 'all';
        let currentMemoId = null;
        let currentSortBy = 'check_date';
        let currentSortOrder = 'desc';
        let currentTeamSortBy = 'check_date';
        let currentTeamSortOrder = 'desc';
        
        // íŒ€ì¥ë©”ì´í”Œê´€ë¦¬ ê´€ë ¨ ë³€ìˆ˜ë“¤
        let teamProperties = [];
        let statusFilterTeam = 'all';
        let occupiedFilterTeam = 'all';
        let dealTypeFilterTeam = 'all';
        let roomSearchFilterTeam = '';
        let employeeSearchFilterTeam = '';
        let currentTeamMaeiplePage = 1;
        let teamMaeipePerPage = 20;
        let teamMaeipleTotalPages = 0;
        
        // íŒ€ì¥ê³ ê°ê´€ë¦¬ ê´€ë ¨ ë³€ìˆ˜ë“¤
        let teamCustomers = [];
        let currentTeamCustomerPage = 1;
        let teamCustomerPerPage = 20;
        let teamCustomerTotalPages = 0;
        let teamCustomerStatusFilter = 'all';
        
        // ì‚¬ì´íŠ¸ ì „í™˜ ë“œë¡­ë‹¤ìš´ í† ê¸€
        function toggleSiteSwitcher() {
            const switcher = document.getElementById('site-switcher');
            switcher.classList.toggle('active');
        }
        
        // ì™¸ë¶€ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
        document.addEventListener('click', function(event) {
            const switcher = document.getElementById('site-switcher');
            if (!switcher.contains(event.target)) {
                switcher.classList.remove('active');
            }
        });
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì§ì› ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        document.addEventListener('DOMContentLoaded', function() {
            showTab('employee');
            updateUserInfo();
            loadEmployees();
            
            // ì‚¬ìš©ì ì—­í•  í™•ì¸í•˜ì—¬ íŒ€ì¥ íƒ­ í‘œì‹œ
            checkUserRoleAndShowTabs();
        });
        
        // ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
        async function updateUserInfo() {
            try {
                const response = await fetch('/api/user-info');
                if (response.ok) {
                    const userInfo = await response.json();
                    
                    // ì‚¬ìš©ì ì´ë¦„ê³¼ ì—­í•  ì—…ë°ì´íŠ¸
                    const userNameElement = document.getElementById('user-name');
                    const userRoleElement = document.getElementById('user-role');
                    const userAvatarElement = document.getElementById('user-avatar');
                    
                    if (userNameElement) {
                        userNameElement.textContent = userInfo.name || 'ì‚¬ìš©ì';
                    }
                    
                    if (userRoleElement) {
                        userRoleElement.textContent = userInfo.role || 'ì§ì›';
                    }
                    
                    if (userAvatarElement) {
                        userAvatarElement.textContent = (userInfo.name || 'ì‚¬').charAt(0);
                    }
                }
            } catch (error) {
                console.error('ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);
            }
        }
        
        // ì‚¬ìš©ì ì—­í•  í™•ì¸í•˜ì—¬ íƒ­ í‘œì‹œ
        async function checkUserRoleAndShowTabs() {
            try {
                // ì„¸ì…˜ ì •ë³´ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ API í˜¸ì¶œ
                const response = await fetch('/api/user-info');
                if (response.ok) {
                    const userInfo = await response.json();
                    console.log('ğŸ” ì‚¬ìš©ì ì •ë³´ í™•ì¸:', userInfo);
                    console.log('ğŸ” userInfo.role:', userInfo.role);
                    console.log('ğŸ” userInfo.employee_role:', userInfo.employee_role);
                    console.log('ğŸ” userInfo.role === "íŒ€ì¥":', userInfo.role === 'íŒ€ì¥');
                    console.log('ğŸ” userInfo.employee_role === "íŒ€ì¥":', userInfo.employee_role === 'íŒ€ì¥');
                    console.log('ğŸ” íŒ€ì¥ ê¶Œí•œ í™•ì¸ ê²°ê³¼:', userInfo.role === 'íŒ€ì¥' || userInfo.employee_role === 'íŒ€ì¥');
                    
                    // íŒ€ì¥ì¸ ê²½ìš°ì—ë§Œ íŒ€ì¥ë©”ì´í”Œê´€ë¦¬ì™€ íŒ€ì¥ê³ ê°ê´€ë¦¬ íƒ­ê³¼ ì„¹ì…˜ í‘œì‹œ
                    if (userInfo.role === 'íŒ€ì¥' || userInfo.employee_role === 'íŒ€ì¥') {
                        const teamLeaderMaeipleNav = document.getElementById('team-leader-maeiple-nav');
                        const teamLeaderCustomerNav = document.getElementById('team-leader-customer-nav');
                        
                        if (teamLeaderMaeipleNav) {
                            teamLeaderMaeipleNav.style.display = 'flex';
                        }
                        if (teamLeaderCustomerNav) {
                            teamLeaderCustomerNav.style.display = 'flex';
                        }
                    } else {
                        // ê´€ë¦¬ìë‚˜ ì¼ë°˜ ì§ì›ì¸ ê²½ìš° íŒ€ì¥ íƒ­ê³¼ ì„¹ì…˜ë“¤ ìˆ¨ê¹€
                        const teamLeaderMaeipleNav = document.getElementById('team-leader-maeiple-nav');
                        const teamLeaderCustomerNav = document.getElementById('team-leader-customer-nav');
                        
                        if (teamLeaderMaeipleNav) {
                            teamLeaderMaeipleNav.style.display = 'none';
                        }
                        if (teamLeaderCustomerNav) {
                            teamLeaderCustomerNav.style.display = 'none';
                        }
                    }
                }
            } catch (error) {
                console.error('ì‚¬ìš©ì ì •ë³´ í™•ì¸ ì˜¤ë¥˜:', error);
                // ì˜¤ë¥˜ ì‹œì—ë„ íŒ€ì¥ íƒ­ê³¼ ì„¹ì…˜ë“¤ì€ ìˆ¨ê¹€ ìƒíƒœ ìœ ì§€
                const teamLeaderMaeipleNav = document.getElementById('team-leader-maeiple-nav');
                const teamLeaderCustomerNav = document.getElementById('team-leader-customer-nav');
                
                if (teamLeaderMaeipleNav) {
                    teamLeaderMaeipleNav.style.display = 'none';
                }
                if (teamLeaderCustomerNav) {
                    teamLeaderCustomerNav.style.display = 'none';
                }
            }
        }
        
        // ì§ì› ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadEmployees(page = 1) {
            try {
                currentEmployeePage = page;
                const response = await fetch(`/api/employees?page=${page}&per_page=${employeePerPage}`);
                const data = await response.json();
                
                employees = Array.isArray(data.employees) ? data.employees : [];
                employeeTotalPages = data.total_pages || 0;
                console.log(`ì§ì› ëª©ë¡ ë¡œë“œ: ${employees.length}ê°œ (í˜ì´ì§€ ${page}/${employeeTotalPages})`);
                
                displayEmployees(employees);
                updateTeamFilter();
                renderEmployeePagination();
            } catch (error) {
                showAlert('ì§ì› ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }
        
        // ì—­í• ë³„ ë°°ì§€ ìƒ‰ìƒ ì„¤ì •
        function getRoleBadgeColor(role) {
            switch(role) {
                case 'íŒ€ì¥': return '#dcfce7';
                case 'ì§ì›': return '#f1f5f9';
                default: return '#f1f5f9';
            }
        }

        function getRoleTextColor(role) {
            switch(role) {
                case 'íŒ€ì¥': return '#166534';
                case 'ì§ì›': return '#475569';
                default: return '#475569';
            }
        }

        // íŒ€ë³„ ë°°ì§€ ìƒ‰ìƒ ì„¤ì •
        function getTeamBadgeColor(team) {
            switch(team) {
                case 'ë¹ˆì‹œíŠ¸': return '#e0f2fe';
                case 'ìœ„í”ŒëŸ¬ìŠ¤': return '#f0fdf4';
                case 'ë°˜í´ë¦¬ì…°': return '#fef7cd';
                case 'ëŒ€í‘œ': return '#fce7f3';
                default: return '#f1f5f9';
            }
        }

        function getTeamTextColor(team) {
            switch(team) {
                case 'ë¹ˆì‹œíŠ¸': return '#0c4a6e';
                case 'ìœ„í”ŒëŸ¬ìŠ¤': return '#166534';
                case 'ë°˜í´ë¦¬ì…°': return '#a16207';
                case 'ëŒ€í‘œ': return '#be185d';
                default: return '#475569';
            }
        }

        // ì§ì› ëª©ë¡ í‘œì‹œ
        function displayEmployees(employeeList) {
            const tbody = document.getElementById('employees-list');
            
            if (employeeList.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 40px; color: #64748b;">ë“±ë¡ëœ ì§ì›ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                return;
            }
            
            tbody.innerHTML = employeeList.map(emp => `
                <tr>
                    <td><strong>${emp.employee_id}</strong></td>
                    <td>${emp.employee_name}</td>
                    <td>
                        <span class="status-badge" style="background: ${getTeamBadgeColor(emp.team)}; color: ${getTeamTextColor(emp.team)};">
                            ${emp.team || 'ë¯¸ì§€ì •'}
                        </span>
                    </td>
                    <td>
                        <span class="status-badge" style="background: ${getRoleBadgeColor(emp.role)}; color: ${getRoleTextColor(emp.role)};">
                            ${emp.role || 'ì§ì›'}
                        </span>
                    </td>
                    <td>${emp.created_date}</td>
                    <td>
                        <span class="status-badge ${emp.is_active ? 'status-active' : 'status-inactive'}">
                            ${emp.is_active ? 'í™œì„±' : 'ë¹„í™œì„±'}
                        </span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            ${emp.is_active ? 
                                `<button class="btn btn-danger btn-sm" onclick="deactivateEmployee(${emp.id})">ë¹„í™œì„±í™”</button>` :
                                `<button class="btn btn-success btn-sm" onclick="activateEmployee(${emp.id})">í™œì„±í™”</button>`
                            }
                            <button class="btn btn-secondary btn-sm" onclick="resetPassword(${emp.id})">ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •</button>
                            ${!emp.is_active ? 
                                `<button class="btn btn-danger btn-sm" onclick="permanentDelete(${emp.id})">ì™„ì „ì‚­ì œ</button>` : ''
                            }
                        </div>
                    </td>
                </tr>
            `).join('');
        }
        
        // íŒ€ í•„í„° ì—…ë°ì´íŠ¸
        function updateTeamFilter() {
            const teamFilter = document.getElementById('team-filter');
            const teams = [...new Set(employees.map(emp => emp.team).filter(team => team))];
            
            teamFilter.innerHTML = '<option value="">ì „ì²´ íŒ€</option>' + 
                teams.map(team => `<option value="${team}">${team}</option>`).join('');
        }
        
        // í•„í„° ì ìš©
        document.getElementById('status-filter').addEventListener('change', applyFilters);
        document.getElementById('team-filter').addEventListener('change', applyFilters);
        
        function applyFilters() {
            const statusFilter = document.getElementById('status-filter').value;
            const teamFilter = document.getElementById('team-filter').value;
            
            let filteredEmployees = employees;
            
            if (statusFilter !== '') {
                filteredEmployees = filteredEmployees.filter(emp => emp.is_active == statusFilter);
            }
            
            if (teamFilter !== '') {
                filteredEmployees = filteredEmployees.filter(emp => emp.team === teamFilter);
            }
            
            displayEmployees(filteredEmployees);
        }
        
        // ì§ì› ì¶”ê°€
        document.getElementById('add-employee-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('add-btn');
            btn.classList.add('loading');
            btn.disabled = true;
            
            const formData = {
                employee_id: document.getElementById('employee_id').value,
                employee_name: document.getElementById('employee_name').value,
                team: document.getElementById('team').value,
                role: document.getElementById('employee_role').value,
                password: '1234'
            };
            
            try {
                const response = await fetch('/api/employees', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('ì§ì›ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                    document.getElementById('add-employee-form').reset();
                    loadEmployees();
                } else {
                    showAlert(result.message || 'ì§ì› ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                showAlert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        });
        
        // ì§ì› ë¹„í™œì„±í™”
        async function deactivateEmployee(empId) {
            if (!confirm('ì´ ì§ì›ì„ ë¹„í™œì„±í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                const response = await fetch(`/api/employees/${empId}`, {
                    method: 'DELETE'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('ì§ì›ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                    loadEmployees();
                } else {
                    showAlert('ë¹„í™œì„±í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                showAlert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }
        
        // ì§ì› í™œì„±í™”
        async function activateEmployee(empId) {
            try {
                const response = await fetch(`/api/employees/${empId}/activate`, {
                    method: 'PUT'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('ì§ì›ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                    loadEmployees();
                } else {
                    showAlert('í™œì„±í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                showAlert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }
        
        // ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •
        async function resetPassword(empId) {
            const newPassword = prompt('ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ê¸°ë³¸ê°’: 1234):', '1234');
            if (!newPassword) return;
            
            try {
                const response = await fetch(`/api/employees/${empId}/reset-password`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ new_password: newPassword })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¬ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                } else {
                    showAlert(result.message || 'ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                showAlert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }
        
        // ì™„ì „ ì‚­ì œ
        async function permanentDelete(empId) {
            if (!confirm('ì´ ì§ì›ì„ ì™„ì „íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) return;
            
            try {
                const response = await fetch(`/api/employees/${empId}/permanent-delete`, {
                    method: 'DELETE'
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showAlert('ì§ì›ì´ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                    loadEmployees();
                } else {
                    showAlert(result.message || 'ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                showAlert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }
        
        // ì•Œë¦¼ í‘œì‹œ
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alert-container');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            alertContainer.innerHTML = '';
            alertContainer.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.remove();
            }, 5000);
        }

        function activateEmployeeTab(e) {
            e.preventDefault();
            showTab('employee');
            
            // ì‚¬ì´ë“œë°” active ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            e.target.closest('.nav-item').classList.add('active');
            
            const section = document.getElementById('employee-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function activateMaeipeTab(e) {
            e.preventDefault();
            showTab('maeiple');
            
            // ì‚¬ì´ë“œë°” active ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            e.target.closest('.nav-item').classList.add('active');
            
            const section = document.getElementById('maeiple-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // ë©”ì´í”Œê´€ë¦¬ ë°ì´í„° ë¡œë“œ
            loadMaeipeProperties();
        }

        function activateTeamMaeipeTab(e) {
            e.preventDefault();
            showTab('team-maeiple');
            
            // ì‚¬ì´ë“œë°” active ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            e.target.closest('.nav-item').classList.add('active');
            
            const section = document.getElementById('team-maeiple-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // íŒ€ì¥ë©”ì´í”Œê´€ë¦¬ ë°ì´í„° ë¡œë“œ
            loadTeamMaeipeProperties();
        }

        function activateDashboardTab(e) {
            e.preventDefault();
            showTab('dashboard');
            
            // ì‚¬ì´ë“œë°” active ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            e.target.closest('.nav-item').classList.add('active');
            
            const section = document.getElementById('dashboard-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // ê³ ê° ë°ì´í„° ë¡œë“œ
            loadAllCustomers();
        }

        function activateTeamLeaderCustomerTab(e) {
            e.preventDefault();
            showTab('team-leader-customer');
            
            // ì‚¬ì´ë“œë°” active ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            e.target.closest('.nav-item').classList.add('active');
            
            const section = document.getElementById('team-leader-customer-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // íŒ€ì¥ ë³¸ì¸ ê³ ê° ë°ì´í„° ë¡œë“œ
            loadTeamLeaderCustomers();
        }

        function activateTeamLeaderMaeipleTab(e) {
            e.preventDefault();
            showTab('team-leader-maeiple');
            
            // ì‚¬ì´ë“œë°” active ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            e.target.closest('.nav-item').classList.add('active');
            
            const section = document.getElementById('team-leader-maeiple-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ë°ì´í„° ë¡œë“œ
            loadTeamLeaderMaeiple();
        }

        function activateTeamCustomerTab(e) {
            e.preventDefault();
            showTab('team-customer');
            
            // ì‚¬ì´ë“œë°” active ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            e.target.closest('.nav-item').classList.add('active');
            
            const section = document.getElementById('team-customer-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // íŒ€ ì „ì²´ ê³ ê° ë°ì´í„° ë¡œë“œ
            loadTeamCustomers();
        }

        function activateGuaranteeTab(e) {
            e.preventDefault();
            showTab('guarantee');
            
            // ì‚¬ì´ë“œë°” active ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            e.target.closest('.nav-item').classList.add('active');
            
            const section = document.getElementById('guarantee-section');
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function showTab(tab) {
            const emp = document.getElementById('employee-section');
            const guar = document.getElementById('guarantee-section');
            const maeiple = document.getElementById('maeiple-section');
            const teamMaeiple = document.getElementById('team-maeiple-section');
            const dashboard = document.getElementById('dashboard-section');
            const teamCustomer = document.getElementById('team-customer-section');
            const teamLeaderCustomer = document.getElementById('team-leader-customer-section');
            const teamLeaderMaeiple = document.getElementById('team-leader-maeiple-section');
            
            // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
            emp.style.display = 'none';
            guar.style.display = 'none';
            maeiple.style.display = 'none';
            teamMaeiple.style.display = 'none';
            dashboard.style.display = 'none';
            teamCustomer.style.display = 'none';
            teamLeaderCustomer.style.display = 'none';
            teamLeaderMaeiple.style.display = 'none';
            
            // ì„ íƒëœ íƒ­ë§Œ í‘œì‹œ
            if(tab === 'employee') {
                emp.style.display = '';
            } else if(tab === 'guarantee') {
                guar.style.display = '';
            } else if(tab === 'maeiple') {
                maeiple.style.display = '';
            } else if(tab === 'team-maeiple') {
                teamMaeiple.style.display = '';
            } else if(tab === 'dashboard') {
                dashboard.style.display = '';
            } else if(tab === 'team-customer') {
                teamCustomer.style.display = '';
            } else if(tab === 'team-leader-customer') {
                teamLeaderCustomer.style.display = '';
            } else if(tab === 'team-leader-maeiple') {
                teamLeaderMaeiple.style.display = '';
            }
        }

        function toggleAddEmployee() {
            const card = document.getElementById('add-employee-card');
            if (card.style.display === 'none' || card.style.display === '') {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        }

        // ==================== ë©”ì´í”Œê´€ë¦¬ ê´€ë ¨ í•¨ìˆ˜ë“¤ ====================
        
        // ë§¤ë¬¼ ëª©ë¡ ì¡°íšŒ
        async function loadMaeipeProperties(page = 1) {
            try {
                currentMaeiplePage = page;
                const url = `/api/maeiple?sort_by=${currentSortBy}&sort_order=${currentSortOrder}&page=${page}&per_page=${maeipePerPage}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.success) {
                    properties = data.properties;
                    maeipleTotalPages = data.total_pages || 0;
                    console.log(`ë©”ì´í”Œê´€ë¦¬ ë§¤ë¬¼ ë¡œë“œ: ${properties.length}ê°œ (í˜ì´ì§€ ${page}/${maeipleTotalPages})`);
                    updateAdminFilters(); // ë‹´ë‹¹ì ë° íŒ€ í•„í„° ì—…ë°ì´íŠ¸
                    renderMaeipeProperties();
                    renderMaeipePagination();
                } else {
                    showMaeipeError('ë§¤ë¬¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('Error:', error);
                showMaeipeError('ë§¤ë¬¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ë§¤ë¬¼ ëª©ë¡ ë Œë”ë§
        function renderMaeipeProperties() {
            const tableContent = document.getElementById('maeiple-table-content');
            
            // í•„í„° ì ìš©
            let list = Array.isArray(properties) ? properties.slice() : [];
            
            // í˜„í™© í•„í„°
            if (statusFilter !== 'all') {
                list = list.filter(p => (p.status || '') === statusFilter);
            }
            
            // ì‹¤ê±°ì£¼ í•„í„°
            if (occupiedFilter !== 'all') {
                const want = occupiedFilter === 'O';
                list = list.filter(p => !!p.is_occupied === want);
            }
            
            // ê±°ë˜ìœ í˜• í•„í„° (ê´€ë¦¬ììš©)
            if (dealTypeFilterAdmin !== 'all') {
                list = list.filter(p => {
                    if (dealTypeFilterAdmin === 'ì „ì„¸') {
                        const jeonsePrice = parseInt(String(p.jeonse_price || '0').replace(/[^\d]/g, '')) || 0;
                        return jeonsePrice > 0;
                    } else if (dealTypeFilterAdmin === 'ì›”ì„¸') {
                        const monthlyRent = parseInt(String(p.monthly_rent || '0').replace(/[^\d]/g, '')) || 0;
                        return monthlyRent > 0;
                    } else if (dealTypeFilterAdmin === 'ë§¤ë§¤') {
                        const salePrice = parseInt(String(p.sale_price || '0').replace(/[^\d]/g, '')) || 0;
                        return salePrice > 0;
                    }
                    return true;
                });
            }
            
            // í˜¸ìˆ˜ ê²€ìƒ‰ í•„í„° (ê´€ë¦¬ììš©)
            if (roomSearchFilterAdmin.trim()) {
                const searchTerm = roomSearchFilterAdmin.trim().toLowerCase();
                list = list.filter(p => {
                    const roomNumber = String(p.room_number || '').toLowerCase();
                    return roomNumber.includes(searchTerm);
                });
            }
            
            // ë‹´ë‹¹ì ê²€ìƒ‰ í•„í„° (ê´€ë¦¬ììš©)
            if (employeeSearchFilterAdmin.trim()) {
                const searchTerm = employeeSearchFilterAdmin.trim().toLowerCase();
                list = list.filter(p => {
                    const employeeName = String(p.employee_name || '').toLowerCase();
                    return employeeName.includes(searchTerm);
                });
            }
            
            // íŒ€ í•„í„° (ê´€ë¦¬ììš©)
            if (teamFilterAdmin !== 'all') {
                list = list.filter(p => (p.employee_team || '') === teamFilterAdmin);
            }
            
            if (list.length === 0) {
                tableContent.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #64748b;">
                        <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">ğŸ¢</div>
                        <p>ì¡°ê±´ì— ë§ëŠ” ë§¤ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p>í•„í„°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆ ë§¤ë¬¼ì„ ì¶”ê°€í•´ë³´ì„¸ìš”.</p>
                    </div>
                `;
                return;
            }
            
            let tableHTML = `
                <table class="employees-table">
                    <thead>
                        <tr>
                            <th>
                                <div style="display: flex; align-items: center; gap: 4px; cursor: pointer; user-select: none;" onclick="toggleSort('check_date')">
                                    í™•ì¸ë‚ ì§œ
                                    <span style="font-size: 12px; color: #9ca3af;">${currentSortBy === 'check_date' ? (currentSortOrder === 'desc' ? 'â–¼' : 'â–²') : 'â†•ï¸'}</span>
                                </div>
                            </th>
                            <th>ë™</th>
                            <th>í˜¸ìˆ˜</th>
                            <th>í˜„í™©</th>
                            <th>ì „ì„¸ (ë§Œì›)</th>
                            <th>ì›”ì„¸ë³´ì¦ê¸ˆ (ë§Œì›)</th>
                            <th>ì›”ì„¸ (ë§Œì›)</th>
                            <th>ë§¤ë§¤ (ë§Œì›)</th>
                            <th>ì‹¤ê±°ì£¼ ì—¬ë¶€</th>
                            <th>ì „í™”ë²ˆí˜¸</th>
                            <th>íŠ¹ì´ì‚¬í•­</th>
                            <th>ë‹´ë‹¹ì</th>
                            <th>íŒ€</th>
                            <th>ì¢‹ì•„ìš”</th>
                            <th>ì‹«ì–´ìš”</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            list.forEach(property => {
                const memoPreview = property.memo ? (property.memo.length > 20 ? property.memo.substring(0, 20) + '...' : property.memo) : '';
                
                tableHTML += `
                    <tr data-property-id="${property.id}">
                        <td style="cursor: pointer;" onclick="editDate(${property.id}, '${property.check_date || ''}', this)">${property.check_date || ''}</td>
                        <td style="cursor: pointer;" onclick="editNumber(${property.id}, 'building_number', '${property.building_number || ''}', this)">${property.building_number || ''}</td>
                        <td style="cursor: pointer;" onclick="editNumber(${property.id}, 'room_number', '${property.room_number || ''}', this)">${property.room_number || ''}</td>
                        <td>
                            <button style="padding: 6px 12px; border: none; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; ${property.status === 'ê³„ì•½ì™„ë£Œ' ? 'background: #d1fae5; color: #065f46;' : property.status === 'ë³´ë¥˜' ? 'background: #fef3c7; color: #92400e;' : property.status === 'ë¶€ì¬' ? 'background: #ede9fe; color: #5b21b6;' : 'background: #e0f2fe; color: #0369a1;'}" 
                                    onclick="showStatusOptions(${property.id}, '${property.status || 'ê±°ë˜ê°€ëŠ¥'}', this)">
                                ${property.status || 'ê±°ë˜ê°€ëŠ¥'}
                            </button>
                        </td>
                        <td style="cursor: pointer; color: #2563eb; font-weight: 500;" onclick="editPrice(${property.id}, 'jeonse_price', '${property.jeonse_price || ''}', this)">
                            ${property.jeonse_price ? formatNumber(property.jeonse_price) + ' ë§Œì›' : '-'}
                        </td>
                        <td style="cursor: pointer; color: #2563eb; font-weight: 500;" onclick="editPrice(${property.id}, 'deposit', '${property.deposit || ''}', this)">
                            ${property.deposit ? formatNumber(property.deposit) + ' ë§Œì›' : '-'}
                        </td>
                        <td style="cursor: pointer; color: #2563eb; font-weight: 500;" onclick="editPrice(${property.id}, 'monthly_rent', '${property.monthly_rent || ''}', this)">
                            ${property.monthly_rent ? formatNumber(property.monthly_rent) + ' ë§Œì›' : '-'}
                        </td>
                        <td style="cursor: pointer; color: #2563eb; font-weight: 500;" onclick="editPrice(${property.id}, 'sale_price', '${property.sale_price || ''}', this)">
                            ${property.sale_price ? formatNumber(property.sale_price) + ' ë§Œì›' : '-'}
                        </td>
                        <td>
                            <button style="background: none; border: none; cursor: pointer; font-size: 18px; padding: 4px; border-radius: 4px; color: ${property.is_occupied ? '#059669' : '#dc2626'};" 
                                    onclick="toggleOccupied(${property.id}, ${property.is_occupied})">
                                ${property.is_occupied ? 'O' : 'X'}
                            </button>
                        </td>
                        <td style="cursor: pointer; font-family: monospace; letter-spacing: 0.5px; max-width: 120px; overflow: hidden; text-overflow: ellipsis;" onclick="editPhone(${property.id}, '${property.phone || ''}', this)">
                            ${property.phone || '-'}
                        </td>
                        <td style="cursor: pointer; color: #64748b; font-style: italic; max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" onclick="showMemoModal(${property.id}, '${property.memo || ''}')">
                            ${memoPreview || 'ë©”ëª¨ ì¶”ê°€...'}
                        </td>
                        <td>
                            <span style="color: #4f46e5; font-weight: 500;">
                                ${property.employee_name || 'ë¯¸ì§€ì •'}
                            </span>
                        </td>
                        <td>
                            <span class="status-badge" style="background: ${getTeamBadgeColor(property.employee_team)}; color: ${getTeamTextColor(property.employee_team)};">
                                ${property.employee_team || 'ë¯¸ì§€ì •'}
                            </span>
                        </td>
                        <td>
                            <div style="cursor: pointer;" onclick="showLikeOptions(${property.id}, ${property.likes}, this)">
                                ${'â¤ï¸'.repeat(property.likes)}${property.likes === 0 ? 'ğŸ¤' : ''}
                            </div>
                        </td>
                        <td>
                            <div style="cursor: pointer;" onclick="showDislikeOptions(${property.id}, ${property.dislikes}, this)">
                                ${'ğŸ‘'.repeat(property.dislikes)}${property.dislikes === 0 ? 'ğŸ¤' : ''}
                            </div>
                        </td>

                    </tr>
                `;
            });
            
            tableHTML += `
                    </tbody>
                </table>
            `;
            
            tableContent.innerHTML = tableHTML;
        }

        // ì •ë ¬ ê¸°ëŠ¥
        async function toggleSort(field) {
            if (currentSortBy === field) {
                currentSortOrder = currentSortOrder === 'desc' ? 'asc' : 'desc';
            } else {
                currentSortBy = field;
                currentSortOrder = 'desc';
            }
            await loadMaeipeProperties();
        }
        
        // íŒ€ì¥ìš© ì •ë ¬ ê¸°ëŠ¥
        async function toggleTeamSort(field) {
            if (currentTeamSortBy === field) {
                currentTeamSortOrder = currentTeamSortOrder === 'desc' ? 'asc' : 'desc';
            } else {
                currentTeamSortBy = field;
                currentTeamSortOrder = 'desc';
            }
            await loadTeamMaeipeProperties();
        }

        // ìˆ«ì 3ìë¦¬ ì½¤ë§ˆ
        function formatNumber(val) {
            const n = typeof val === 'number' ? val : parseInt(String(val).replace(/[^\d-]/g, ''), 10);
            if (isNaN(n)) return '';
            return n.toLocaleString('ko-KR');
        }

        // í•„í„° í•¸ë“¤ëŸ¬
        function setStatusFilter(value, btn) {
            statusFilter = value;
            document.querySelectorAll('#status-filter-group .filter-btn').forEach(b => {
                b.classList.remove('active');
                b.style.background = '#ffffff';
                b.style.color = '#334155';
                b.style.fontWeight = 'normal';
            });
            btn.classList.add('active');
            btn.style.background = '#e0e7ff';
            btn.style.color = '#4338ca';
            btn.style.fontWeight = '600';
            renderMaeipeProperties();
        }

        function setOccupiedFilter(value, btn) {
            occupiedFilter = value;
            document.querySelectorAll('#occupied-filter-group .filter-btn').forEach(b => {
                b.classList.remove('active');
                b.style.background = '#ffffff';
                b.style.color = '#334155';
                b.style.fontWeight = 'normal';
            });
            btn.classList.add('active');
            btn.style.background = '#e0e7ff';
            btn.style.color = '#4338ca';
            btn.style.fontWeight = '600';
            renderMaeipeProperties();
        }
        
        // ê´€ë¦¬ììš© ê±°ë˜ìœ í˜• í•„í„°
        function setDealTypeFilterAdmin(value, btn) {
            dealTypeFilterAdmin = value;
            document.querySelectorAll('#deal-type-filter-group-admin .filter-btn').forEach(b => {
                b.classList.remove('active');
                b.style.background = '#ffffff';
                b.style.color = '#334155';
                b.style.fontWeight = 'normal';
            });
            btn.classList.add('active');
            btn.style.background = '#e0e7ff';
            btn.style.color = '#4338ca';
            btn.style.fontWeight = '600';
            renderMaeipeProperties();
        }
        
        // ê´€ë¦¬ììš© í˜¸ìˆ˜ ê²€ìƒ‰ í•„í„°
        function filterByRoomAdmin(searchValue) {
            roomSearchFilterAdmin = searchValue;
            renderMaeipeProperties();
        }
        
        // ê´€ë¦¬ììš© ë‹´ë‹¹ì ê²€ìƒ‰ í•„í„°
        function filterByEmployeeAdmin(searchValue) {
            employeeSearchFilterAdmin = searchValue;
            renderMaeipeProperties();
        }
        
        // ê´€ë¦¬ììš© íŒ€ í•„í„°
        function setTeamFilterAdmin(value, btn) {
            teamFilterAdmin = value;
            document.querySelectorAll('#team-filter-group-admin .filter-btn').forEach(b => {
                b.classList.remove('active');
                b.style.background = '#ffffff';
                b.style.color = '#334155';
                b.style.fontWeight = 'normal';
            });
            btn.classList.add('active');
            btn.style.background = '#e0e7ff';
            btn.style.color = '#4338ca';
            btn.style.fontWeight = '600';
            renderMaeipeProperties();
        }
        
        // ê´€ë¦¬ììš© íŒ€ í•„í„° ì—…ë°ì´íŠ¸
        function updateAdminFilters() {
            // íŒ€ í•„í„° ì—…ë°ì´íŠ¸
            const teamFilterGroup = document.getElementById('team-filter-group-admin');
            const teamFilterButtons = teamFilterGroup.querySelector('.filter-buttons');
            
            // í˜„ì¬ ë§¤ë¬¼ ëª©ë¡ì—ì„œ íŒ€ë“¤ ì¶”ì¶œ
            const teams = [...new Set(properties.map(p => p.employee_team).filter(team => team))];
            
            // ì „ì²´ ë²„íŠ¼ + ê°œë³„ íŒ€ ë²„íŠ¼ë“¤
            let teamButtonsHTML = `
                <button class="filter-btn ${teamFilterAdmin === 'all' ? 'active' : ''}" data-value="all" onclick="setTeamFilterAdmin('all', this)" 
                        style="padding: 6px 10px; border: 1px solid #e2e8f0; background: ${teamFilterAdmin === 'all' ? '#e0e7ff' : '#ffffff'}; color: ${teamFilterAdmin === 'all' ? '#4338ca' : '#334155'}; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: ${teamFilterAdmin === 'all' ? '600' : 'normal'};">ì „ì²´</button>
            `;
            
            teams.forEach(team => {
                const isActive = teamFilterAdmin === team;
                teamButtonsHTML += `
                    <button class="filter-btn ${isActive ? 'active' : ''}" data-value="${team}" onclick="setTeamFilterAdmin('${team}', this)"
                            style="padding: 6px 10px; border: 1px solid #e2e8f0; background: ${isActive ? '#e0e7ff' : '#ffffff'}; color: ${isActive ? '#4338ca' : '#334155'}; border-radius: 20px; font-size: 12px; cursor: pointer; font-weight: ${isActive ? '600' : 'normal'};">${team}</button>
                `;
            });
            
            teamFilterButtons.innerHTML = teamButtonsHTML;
        }
        
        // íŒ€ì¥ìš© ë§¤ë¬¼ ë¡œë“œ
        async function loadTeamMaeipeProperties(page = 1) {
            try {
                currentTeamMaeiplePage = page;
                const url = `/api/maeiple/team?sort_by=${currentTeamSortBy}&sort_order=${currentTeamSortOrder}&page=${page}&per_page=${teamMaeipePerPage}`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.success) {
                    teamProperties = data.properties;
                    teamMaeipleTotalPages = data.total_pages || 0;
                    console.log(`íŒ€ì¥ìš© ë§¤ë¬¼ ë¡œë“œ: ${teamProperties.length}ê°œ (í˜ì´ì§€ ${page}/${teamMaeipleTotalPages})`);
                    
                    // íŒ€ì¥ìš© ë©”ì´í”Œê´€ë¦¬ í†µê³„ ì—…ë°ì´íŠ¸
                    updateTeamMaeipleStats(data);
                    
                    renderTeamMaeipeProperties();
                    updateTeamEmployeeFilter(); // ë‹´ë‹¹ì í•„í„° ì—…ë°ì´íŠ¸
                    renderTeamMaeipePagination();
                } else {
                    showTeamMaeipeError('íŒ€ ë§¤ë¬¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('Error:', error);
                showTeamMaeipeError('íŒ€ ë§¤ë¬¼ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // íŒ€ì¥ìš© ë§¤ë¬¼ ë Œë”ë§
        function renderTeamMaeipeProperties() {
            const tableContent = document.getElementById('team-maeiple-table-content');
            
            // í•„í„° ì ìš©
            let list = Array.isArray(teamProperties) ? teamProperties.slice() : [];
            
            // í˜„í™© í•„í„°
            if (statusFilterTeam !== 'all') {
                list = list.filter(p => (p.status || '') === statusFilterTeam);
            }
            
            // ì‹¤ê±°ì£¼ í•„í„°
            if (occupiedFilterTeam !== 'all') {
                const want = occupiedFilterTeam === 'O';
                list = list.filter(p => !!p.is_occupied === want);
            }
            
            // ê±°ë˜ìœ í˜• í•„í„°
            if (dealTypeFilterTeam !== 'all') {
                list = list.filter(p => {
                    if (dealTypeFilterTeam === 'ì „ì„¸') {
                        const jeonsePrice = parseInt(String(p.jeonse_price || '0').replace(/[^\d]/g, '')) || 0;
                        return jeonsePrice > 0;
                    } else if (dealTypeFilterTeam === 'ì›”ì„¸') {
                        const monthlyRent = parseInt(String(p.monthly_rent || '0').replace(/[^\d]/g, '')) || 0;
                        return monthlyRent > 0;
                    } else if (dealTypeFilterTeam === 'ë§¤ë§¤') {
                        const salePrice = parseInt(String(p.sale_price || '0').replace(/[^\d]/g, '')) || 0;
                        return salePrice > 0;
                    }
                    return true;
                });
            }
            
            // í˜¸ìˆ˜ ê²€ìƒ‰ í•„í„°
            if (roomSearchFilterTeam.trim()) {
                const searchTerm = roomSearchFilterTeam.trim().toLowerCase();
                list = list.filter(p => {
                    const roomNumber = String(p.room_number || '').toLowerCase();
                    return roomNumber.includes(searchTerm);
                });
            }
            
            // ë‹´ë‹¹ì ê²€ìƒ‰ í•„í„°
            if (employeeSearchFilterTeam.trim()) {
                const searchTerm = employeeSearchFilterTeam.trim().toLowerCase();
                list = list.filter(p => {
                    const employeeName = String(p.employee_name || '').toLowerCase();
                    return employeeName.includes(searchTerm);
                });
            }
            
            if (list.length === 0) {
                tableContent.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #64748b;">
                        <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">ğŸ‘¥ğŸ¢</div>
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">ìš°ë¦¬íŒ€ ë§¤ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <div style="font-size: 14px; opacity: 0.7;">ìƒˆ ë§¤ë¬¼ì„ ì¶”ê°€í•´ë³´ì„¸ìš”.</div>
                    </div>
                `;
                return;
            }
            
            let tableHTML = `
                <table class="employees-table">
                    <thead>
                        <tr>
                            <th>
                                <div style="display: flex; align-items: center; gap: 4px; cursor: pointer; user-select: none;" onclick="toggleTeamSort('check_date')">
                                    í™•ì¸ë‚ ì§œ
                                    <span style="font-size: 12px; color: #9ca3af;">${currentTeamSortBy === 'check_date' ? (currentTeamSortOrder === 'desc' ? 'â–¼' : 'â–²') : 'â†•ï¸'}</span>
                                </div>
                            </th>
                            <th>ë™</th>
                            <th>í˜¸ìˆ˜</th>
                            <th>í˜„í™©</th>
                            <th>ì „ì„¸ (ë§Œì›)</th>
                            <th>ì›”ì„¸ë³´ì¦ê¸ˆ (ë§Œì›)</th>
                            <th>ì›”ì„¸ (ë§Œì›)</th>
                            <th>ë§¤ë§¤ (ë§Œì›)</th>
                            <th>ì‹¤ê±°ì£¼ ì—¬ë¶€</th>
                            <th>ì „í™”ë²ˆí˜¸</th>
                            <th>íŠ¹ì´ì‚¬í•­</th>
                            <th>ë‹´ë‹¹ì</th>
                            <th>íŒ€</th>
                            <th>ì¢‹ì•„ìš”</th>
                            <th>ì‹«ì–´ìš”</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            list.forEach(property => {
                const memoPreview = property.memo ? (property.memo.length > 20 ? property.memo.substring(0, 20) + '...' : property.memo) : '';
                
                tableHTML += `
                    <tr data-property-id="${property.id}">
                        <td style="cursor: pointer;" onclick="editTeamDate(${property.id}, '${property.check_date || ''}', this)">${property.check_date || ''}</td>
                        <td style="cursor: pointer;" onclick="editTeamNumber(${property.id}, 'building_number', '${property.building_number || ''}', this)">${property.building_number || ''}</td>
                        <td style="cursor: pointer;" onclick="editTeamNumber(${property.id}, 'room_number', '${property.room_number || ''}', this)">${property.room_number || ''}</td>
                        <td>
                            <button style="padding: 6px 12px; border: none; border-radius: 6px; font-size: 12px; font-weight: 500; cursor: pointer; ${property.status === 'ê³„ì•½ì™„ë£Œ' ? 'background: #d1fae5; color: #065f46;' : property.status === 'ë³´ë¥˜' ? 'background: #fef3c7; color: #92400e;' : property.status === 'ë¶€ì¬' ? 'background: #ede9fe; color: #5b21b6;' : 'background: #e0f2fe; color: #0369a1;'}" 
                                    onclick="showTeamStatusOptions(${property.id}, '${property.status || 'ê±°ë˜ê°€ëŠ¥'}', this)">
                                ${property.status || 'ê±°ë˜ê°€ëŠ¥'}
                            </button>
                        </td>
                        <td style="cursor: pointer; color: #2563eb; font-weight: 500;" onclick="editTeamPrice(${property.id}, 'jeonse_price', '${property.jeonse_price || ''}', this)">
                            ${property.jeonse_price ? formatNumber(property.jeonse_price) + ' ë§Œì›' : '-'}
                        </td>
                        <td style="cursor: pointer; color: #2563eb; font-weight: 500;" onclick="editTeamPrice(${property.id}, 'deposit', '${property.deposit || ''}', this)">
                            ${property.deposit ? formatNumber(property.deposit) + ' ë§Œì›' : '-'}
                        </td>
                        <td style="cursor: pointer; color: #2563eb; font-weight: 500;" onclick="editTeamPrice(${property.id}, 'monthly_rent', '${property.monthly_rent || ''}', this)">
                            ${property.monthly_rent ? formatNumber(property.monthly_rent) + ' ë§Œì›' : '-'}
                        </td>
                        <td style="cursor: pointer; color: #2563eb; font-weight: 500;" onclick="editTeamPrice(${property.id}, 'sale_price', '${property.sale_price || ''}', this)">
                            ${property.sale_price ? formatNumber(property.sale_price) + ' ë§Œì›' : '-'}
                        </td>
                        <td>
                            <button style="background: none; border: none; cursor: pointer; font-size: 18px; padding: 4px; border-radius: 4px; color: ${property.is_occupied ? '#059669' : '#dc2626'};" 
                                    onclick="toggleTeamOccupied(${property.id}, ${property.is_occupied})">
                                ${property.is_occupied ? 'O' : 'X'}
                            </button>
                        </td>
                        <td style="cursor: pointer; font-family: monospace; letter-spacing: 0.5px; max-width: 120px; overflow: hidden; text-overflow: ellipsis;" onclick="editTeamPhone(${property.id}, '${property.phone || ''}', this)">
                            ${property.phone || '-'}
                        </td>
                        <td style="cursor: pointer; color: #64748b; font-style: italic; max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" onclick="showMemoModal(${property.id}, '${property.memo || ''}')">
                            ${memoPreview || 'ë©”ëª¨ ì¶”ê°€...'}
                        </td>
                        <td>
                            <span style="color: #4f46e5; font-weight: 500;">
                                ${property.employee_name || 'ë¯¸ì§€ì •'}
                            </span>
                        </td>
                        <td>
                            <span class="status-badge" style="background: ${getTeamBadgeColor(property.employee_team)}; color: ${getTeamTextColor(property.employee_team)};">
                                ${property.employee_team || 'ë¯¸ì§€ì •'}
                            </span>
                        </td>
                        <td>
                            <div style="cursor: pointer;" onclick="showLikeOptions(${property.id}, ${property.likes}, this)">
                                ${'â¤ï¸'.repeat(property.likes)}${property.likes === 0 ? 'ğŸ¤' : ''}
                            </div>
                        </td>
                        <td>
                            <div style="cursor: pointer;" onclick="showDislikeOptions(${property.id}, ${property.dislikes}, this)">
                                ${'ğŸ‘'.repeat(property.dislikes)}${property.dislikes === 0 ? 'ğŸ¤' : ''}
                            </div>
                        </td>
                    </tr>
                `;
            });
            
            tableHTML += `
                    </tbody>
                </table>
            `;
            
            tableContent.innerHTML = tableHTML;
        }
        

        
        // íŒ€ì¥ìš© í•„í„° í•¨ìˆ˜ë“¤
        function setStatusFilterTeam(value, btn) {
            statusFilterTeam = value;
            document.querySelectorAll('#status-filter-group-team .filter-btn').forEach(b => {
                b.classList.remove('active');
                b.style.background = '#ffffff';
                b.style.color = '#334155';
                b.style.fontWeight = 'normal';
            });
            btn.classList.add('active');
            btn.style.background = '#e0e7ff';
            btn.style.color = '#4338ca';
            btn.style.fontWeight = '600';
            renderTeamMaeipeProperties();
        }
        
        function setOccupiedFilterTeam(value, btn) {
            occupiedFilterTeam = value;
            document.querySelectorAll('#occupied-filter-group-team .filter-btn').forEach(b => {
                b.classList.remove('active');
                b.style.background = '#ffffff';
                b.style.color = '#334155';
                b.style.fontWeight = 'normal';
            });
            btn.classList.add('active');
            btn.style.background = '#e0e7ff';
            btn.style.color = '#4338ca';
            btn.style.fontWeight = '600';
            renderTeamMaeipeProperties();
        }
        
        function setDealTypeFilterTeam(value, btn) {
            dealTypeFilterTeam = value;
            document.querySelectorAll('#deal-type-filter-group-team .filter-btn').forEach(b => {
                b.classList.remove('active');
                b.style.background = '#ffffff';
                b.style.color = '#334155';
                b.style.fontWeight = 'normal';
            });
            btn.classList.add('active');
            btn.style.background = '#e0e7ff';
            btn.style.color = '#4338ca';
            btn.style.fontWeight = '600';
            renderTeamMaeipeProperties();
        }
        
        function filterByRoomTeam(searchValue) {
            roomSearchFilterTeam = searchValue;
            renderTeamMaeipeProperties();
        }
        
        // íŒ€ì¥ìš© ë‹´ë‹¹ì ê²€ìƒ‰ í•„í„°
        function filterByEmployeeTeam(searchValue) {
            employeeSearchFilterTeam = searchValue;
            renderTeamMaeipeProperties();
        }
        
        function showTeamMaeipeError(message) {
            const tableContent = document.getElementById('team-maeiple-table-content');
            tableContent.innerHTML = `
                <div style="text-align: center; padding: 40px; color: #ef4444;">
                    <div style="font-size: 48px; margin-bottom: 16px;">âš ï¸</div>
                    <div style="font-size: 16px; font-weight: 600;">${message}</div>
                </div>
            `;
        }
        
        // ê³ ê°ê´€ë¦¬ í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§
        function renderCustomerPagination() {
            const paginationDiv = document.getElementById('customer-pagination');
            if (!paginationDiv || customerTotalPages <= 1) {
                if (paginationDiv) paginationDiv.style.display = 'none';
                return;
            }
            
            paginationDiv.style.display = 'flex';
            let paginationHTML = '';
            
            // ì´ì „ í˜ì´ì§€ ë²„íŠ¼
            if (currentCustomerPage > 1) {
                paginationHTML += `<button onclick="loadAllCustomers(${currentCustomerPage - 1})" style="padding: 8px 12px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; color: #374151;">ì´ì „</button>`;
            }
            
            // í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼ë“¤ (ìµœëŒ€ 7ê°œ í‘œì‹œ)
            const startPage = Math.max(1, currentCustomerPage - 3);
            const endPage = Math.min(customerTotalPages, startPage + 6);
            
            for (let i = startPage; i <= endPage; i++) {
                const isActive = i === currentCustomerPage;
                paginationHTML += `
                    <button onclick="loadAllCustomers(${i})" 
                            style="padding: 8px 12px; border: 1px solid ${isActive ? '#3b82f6' : '#d1d5db'}; 
                                   background: ${isActive ? '#3b82f6' : '#f9fafb'}; color: ${isActive ? 'white' : '#374151'}; 
                                   border-radius: 6px; cursor: pointer; font-weight: ${isActive ? '600' : 'normal'};">
                        ${i}
                    </button>
                `;
            }
            
            // ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼
            if (currentCustomerPage < customerTotalPages) {
                paginationHTML += `<button onclick="loadAllCustomers(${currentCustomerPage + 1})" style="padding: 8px 12px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; color: #374151;">ë‹¤ìŒ</button>`;
            }
            
            paginationDiv.innerHTML = paginationHTML;
        }
        
        // ì§ì›ê´€ë¦¬ í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§
        function renderEmployeePagination() {
            const paginationDiv = document.getElementById('employee-pagination');
            if (!paginationDiv || employeeTotalPages <= 1) {
                if (paginationDiv) paginationDiv.style.display = 'none';
                return;
            }
            
            paginationDiv.style.display = 'flex';
            let paginationHTML = '';
            
            // ì´ì „ í˜ì´ì§€ ë²„íŠ¼
            if (currentEmployeePage > 1) {
                paginationHTML += `<button onclick="loadEmployees(${currentEmployeePage - 1})" style="padding: 8px 12px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; color: #374151;">ì´ì „</button>`;
            }
            
            // í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼ë“¤ (ìµœëŒ€ 7ê°œ í‘œì‹œ)
            const startPage = Math.max(1, currentEmployeePage - 3);
            const endPage = Math.min(employeeTotalPages, startPage + 6);
            
            for (let i = startPage; i <= endPage; i++) {
                const isActive = i === currentEmployeePage;
                paginationHTML += `
                    <button onclick="loadEmployees(${i})" 
                            style="padding: 8px 12px; border: 1px solid ${isActive ? '#3b82f6' : '#d1d5db'}; 
                                   background: ${isActive ? '#3b82f6' : '#f9fafb'}; color: ${isActive ? 'white' : '#374151'}; 
                                   border-radius: 6px; cursor: pointer; font-weight: ${isActive ? '600' : 'normal'};">
                        ${i}
                    </button>
                `;
            }
            
            // ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼
            if (currentEmployeePage < employeeTotalPages) {
                paginationHTML += `<button onclick="loadEmployees(${currentEmployeePage + 1})" style="padding: 8px 12px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; color: #374151;">ë‹¤ìŒ</button>`;
            }
            
            paginationDiv.innerHTML = paginationHTML;
        }
        
        // ë©”ì´í”Œê´€ë¦¬ í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§
        function renderMaeipePagination() {
            const paginationDiv = document.getElementById('maeiple-pagination');
            if (!paginationDiv || maeipleTotalPages <= 1) {
                if (paginationDiv) paginationDiv.style.display = 'none';
                return;
            }
            
            paginationDiv.style.display = 'flex';
            let paginationHTML = '';
            
            // ì´ì „ í˜ì´ì§€ ë²„íŠ¼
            if (currentMaeiplePage > 1) {
                paginationHTML += `<button onclick="loadMaeipeProperties(${currentMaeiplePage - 1})" style="padding: 8px 12px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; color: #374151;">ì´ì „</button>`;
            }
            
            // í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼ë“¤ (ìµœëŒ€ 7ê°œ í‘œì‹œ)
            const startPage = Math.max(1, currentMaeiplePage - 3);
            const endPage = Math.min(maeipleTotalPages, startPage + 6);
            
            for (let i = startPage; i <= endPage; i++) {
                const isActive = i === currentMaeiplePage;
                paginationHTML += `
                    <button onclick="loadMaeipeProperties(${i})" 
                            style="padding: 8px 12px; border: 1px solid ${isActive ? '#3b82f6' : '#d1d5db'}; 
                                   background: ${isActive ? '#3b82f6' : '#f9fafb'}; color: ${isActive ? 'white' : '#374151'}; 
                                   border-radius: 6px; cursor: pointer; font-weight: ${isActive ? '600' : 'normal'};">
                        ${i}
                    </button>
                `;
            }
            
            // ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼
            if (currentMaeiplePage < maeipleTotalPages) {
                paginationHTML += `<button onclick="loadMaeipeProperties(${currentMaeiplePage + 1})" style="padding: 8px 12px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; color: #374151;">ë‹¤ìŒ</button>`;
            }
            
            paginationDiv.innerHTML = paginationHTML;
        }
        
        // íŒ€ì¥ìš© ë©”ì´í”Œê´€ë¦¬ í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§
        function renderTeamMaeipePagination() {
            const paginationDiv = document.getElementById('team-maeiple-pagination');
            if (!paginationDiv || teamMaeipleTotalPages <= 1) {
                if (paginationDiv) paginationDiv.style.display = 'none';
                return;
            }
            
            paginationDiv.style.display = 'flex';
            let paginationHTML = '';
            
            // ì´ì „ í˜ì´ì§€ ë²„íŠ¼
            if (currentTeamMaeiplePage > 1) {
                paginationHTML += `<button onclick="loadTeamMaeipeProperties(${currentTeamMaeiplePage - 1})" style="padding: 8px 12px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; color: #374151;">ì´ì „</button>`;
            }
            
            // í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼ë“¤ (ìµœëŒ€ 7ê°œ í‘œì‹œ)
            const startPage = Math.max(1, currentTeamMaeiplePage - 3);
            const endPage = Math.min(teamMaeipleTotalPages, startPage + 6);
            
            for (let i = startPage; i <= endPage; i++) {
                const isActive = i === currentTeamMaeiplePage;
                paginationHTML += `
                    <button onclick="loadTeamMaeipeProperties(${i})" 
                            style="padding: 8px 12px; border: 1px solid ${isActive ? '#3b82f6' : '#d1d5db'}; 
                                   background: ${isActive ? '#3b82f6' : '#f9fafb'}; color: ${isActive ? 'white' : '#374151'}; 
                                   border-radius: 6px; cursor: pointer; font-weight: ${isActive ? '600' : 'normal'};">
                        ${i}
                    </button>
                `;
            }
            
            // ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼
            if (currentTeamMaeiplePage < teamMaeipleTotalPages) {
                paginationHTML += `<button onclick="loadTeamMaeipeProperties(${currentTeamMaeiplePage + 1})" style="padding: 8px 12px; border: 1px solid #d1d5db; background: #f9fafb; border-radius: 6px; cursor: pointer; color: #374151;">ë‹¤ìŒ</button>`;
            }
            
            paginationDiv.innerHTML = paginationHTML;
        }

        // ë©”ëª¨ ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function showMemoModal(id, memo) {
            currentMemoId = id;
            document.getElementById('memoTextarea').value = memo;
            document.getElementById('memoModal').style.display = 'block';
        }

        function closeMemoModal() {
            document.getElementById('memoModal').style.display = 'none';
            currentMemoId = null;
        }

        async function saveMemo() {
            if (!currentMemoId) return;
            
            const memo = document.getElementById('memoTextarea').value;
            
            try {
                const response = await fetch('/api/maeiple/memo', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        id: currentMemoId,
                        memo: memo
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    const property = properties.find(p => p.id === currentMemoId);
                    if (property) {
                        property.memo = memo;
                    }
                    closeMemoModal();
                    renderMaeipeProperties();
                    showMaeipeSuccess('ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    showMaeipeError('ë©”ëª¨ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('Error:', error);
                showMaeipeError('ë©”ëª¨ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì—ëŸ¬/ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        function showMaeipeError(message) {
            alert('âŒ ' + message);
        }

        function showMaeipeSuccess(message) {
            alert('âœ… ' + message);
        }

        // ì„ì‹œ êµ¬í˜„ - ë‚˜ë¨¸ì§€ í•¨ìˆ˜ë“¤ì€ í•„ìš”ì‹œ ì¶”ê°€
        function addNewPropertyRow() { alert('ìƒˆ ë§¤ë¬¼ ì¶”ê°€ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function editDate(id, value, cell) { alert('ë‚ ì§œ í¸ì§‘ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function editNumber(id, field, value, cell) { alert('ìˆ«ì í¸ì§‘ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function editPrice(id, field, value, cell) { alert('ê°€ê²© í¸ì§‘ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function editPhone(id, value, cell) { alert('ì „í™”ë²ˆí˜¸ í¸ì§‘ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function showStatusOptions(id, status, btn) { alert('ìƒíƒœ ë³€ê²½ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function toggleOccupied(id, occupied) { alert('ì‹¤ê±°ì£¼ ë³€ê²½ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function showLikeOptions(id, likes, element) { alert('ì¢‹ì•„ìš” ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function showDislikeOptions(id, dislikes, element) { alert('ì‹«ì–´ìš” ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function deleteProperty(id) { alert('ì‚­ì œ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }

        // ==================== ê³ ê° ê´€ë¦¬ ê´€ë ¨ í•¨ìˆ˜ë“¤ ====================
        
        let allCustomers = [];
        let filteredCustomers = [];
        let currentCustomerFilter = 'all';
        let currentEmployeeFilter = 'all';
        let currentCustomerPage = 1;
        let customerPerPage = 20;
        let customerTotalPages = 0;

        // ëª¨ë“  ê³ ê° ëª©ë¡ ì¡°íšŒ (ê´€ë¦¬ììš© - ëª¨ë“  ì§ì›ì˜ ê³ ê° í†µí•©)
        async function loadAllCustomers(page = 1) {
            try {
                currentCustomerPage = page;
                const response = await fetch(`/api/customers?all_employees=true&page=${page}&per_page=${customerPerPage}`);
                const data = await response.json();
                
                allCustomers = Array.isArray(data.customers) ? data.customers : [];
                customerTotalPages = data.total_pages || 0;
                console.log(`ì „ì²´ ê³ ê° ëª©ë¡ ë¡œë“œ: ${allCustomers.length}ê°œ (í˜ì´ì§€ ${page}/${customerTotalPages})`);
                
                // ì§ì› í•„í„° ì˜µì…˜ ì—…ë°ì´íŠ¸
                updateEmployeeFilter();
                
                // ê³ ê° ëª©ë¡ ë Œë”ë§
                applyCustomerFilters();
                updateCustomerStats();
                renderCustomerPagination();
                
            } catch (error) {
                console.error('ê³ ê° ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
                showCustomerError('ê³ ê° ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì§ì› í•„í„° ì˜µì…˜ ì—…ë°ì´íŠ¸
        function updateEmployeeFilter() {
            const select = document.getElementById('employee-filter');
            const employees = [...new Set(allCustomers.map(c => c.employee_name || c.employee_id).filter(Boolean))];
            
            select.innerHTML = '<option value="all">ì „ì²´ ì§ì›</option>';
            employees.forEach(emp => {
                const option = document.createElement('option');
                option.value = emp;
                option.textContent = emp;
                select.appendChild(option);
            });
        }

        // ê³ ê° í•„í„° ì ìš©
        function applyCustomerFilters() {
            filteredCustomers = allCustomers.slice();
            
            // ìƒíƒœ í•„í„° (progress_status í•„ë“œ ì‚¬ìš©)
            if (currentCustomerFilter !== 'all') {
                filteredCustomers = filteredCustomers.filter(c => (c.progress_status || 'ìƒë‹´ì¤‘') === currentCustomerFilter);
            }
            
            // ì§ì› í•„í„°
            if (currentEmployeeFilter !== 'all') {
                filteredCustomers = filteredCustomers.filter(c => 
                    (c.employee_name || c.employee_id) === currentEmployeeFilter
                );
            }
            
            renderCustomerTable();
        }

        // ê³ ê° í…Œì´ë¸” ë Œë”ë§
        function renderCustomerTable() {
            const tableContent = document.getElementById('customer-table-content');
            
            if (filteredCustomers.length === 0) {
                tableContent.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #64748b;">
                        <div style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;">ğŸ‘¥</div>
                        <p>ì¡°ê±´ì— ë§ëŠ” ê³ ê°ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p>í•„í„°ë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ìƒˆ ê³ ê°ì„ ì¶”ê°€í•´ë³´ì„¸ìš”.</p>
                    </div>
                `;
                return;
            }

            let tableHTML = `
                <table class="employees-table">
                    <thead>
                        <tr>
                            <th>ë‚ ì§œ</th>
                            <th>ì…ì£¼</th>
                            <th>ê³ ê°</th>
                            <th>ê³ ê°ë²ˆí˜¸</th>
                            <th>ê¸ˆì•¡</th>
                            <th>ë£¸ìˆ˜</th>
                            <th>ìœ„ì¹˜</th>
                            <th>ëŒ€ì¶œì—¬ë¶€</th>
                            <th>ì£¼ì°¨</th>
                            <th>ì• ì™„</th>
                            <th>ë©”ëª¨</th>
                            <th>ì§„í–‰ì—¬ë¶€</th>
                            <th>ì£¼ê±°ì‚¬ì´íŠ¸</th>
                            <th>ì—…ë¬´ì‚¬ì´íŠ¸</th>
                            <th>ë‹´ë‹¹ì</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            filteredCustomers.forEach(customer => {
                const statusClass = customer.progress_status === 'ê³„ì•½' ? 'status-complete' : 
                                   customer.progress_status === 'ë³´ë¥˜' ? 'status-hold' : 'status-progress';
                
                tableHTML += `
                    <tr>
                        <td>${customer.inquiry_date || '-'}</td>
                        <td>${customer.move_in_date || '-'}</td>
                        <td style="font-weight: 600;">${customer.customer_name || '-'}</td>
                        <td style="font-family: monospace;">${customer.phone || '-'}</td>
                        <td style="font-weight: 600; color: #059669;">${customer.budget ? customer.budget + 'ë§Œì›' : '-'}</td>
                        <td>${customer.rooms || '-'}</td>
                        <td>${customer.location || '-'}</td>
                        <td>${customer.loan_needed ? 'O' : 'X'}</td>
                        <td>${customer.parking_needed ? 'O' : 'X'}</td>
                        <td>${customer.pet_allowed ? 'O' : 'X'}</td>
                        <td style="max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="${customer.memo || ''}">${customer.memo || '-'}</td>
                        <td>
                            <span class="status-badge ${statusClass}">
                                ${customer.progress_status || 'ìƒë‹´ì¤‘'}
                            </span>
                        </td>
                        <td>
                            ${customer.residence_site_id ? `<a href="http://localhost:5000/?management_site_id=${customer.residence_site_id}" target="_blank" class="site-link">ì£¼ê±°ì‚¬ì´íŠ¸</a>` : '-'}
                        </td>
                        <td>
                            ${customer.office_site_id ? `<a href="http://localhost:5001/?management_site_id=${customer.office_site_id}" target="_blank" class="site-link">ì—…ë¬´ì‚¬ì´íŠ¸</a>` : '-'}
                        </td>
                        <td style="font-weight: 500; color: #6366f1;">${customer.employee_name || customer.employee_id || '-'}</td>
                    </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;

            tableContent.innerHTML = tableHTML;
        }

        // ê³ ê° í†µê³„ ì—…ë°ì´íŠ¸
        function updateCustomerStats() {
            const total = allCustomers.length;
            const progress = allCustomers.filter(c => (c.progress_status || 'ìƒë‹´ì¤‘') === 'ìƒë‹´ì¤‘').length;
            const completed = allCustomers.filter(c => (c.progress_status || '') === 'ê³„ì•½').length;
            
            // ì´ë²ˆ ì£¼ ì‹ ê·œ ê³ ê° (7ì¼ ì´ë‚´)
            const weekAgo = new Date();
            weekAgo.setDate(weekAgo.getDate() - 7);
            const newCustomers = allCustomers.filter(c => {
                if (!c.date) return false;
                const customerDate = new Date(c.date);
                return customerDate >= weekAgo;
            }).length;

            document.getElementById('total-customers-admin').textContent = total;
            document.getElementById('progress-customers-admin').textContent = progress;
            document.getElementById('completed-customers-admin').textContent = completed;
            document.getElementById('new-customers-admin').textContent = newCustomers;
        }

        // ê³ ê° ìƒíƒœ í•„í„°
        function setCustomerFilter(status, btn) {
            currentCustomerFilter = status;
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.customer-filter-btn').forEach(b => {
                b.style.background = 'white';
                b.style.color = '#64748b';
            });
            btn.style.background = '#6366f1';
            btn.style.color = 'white';
            
            applyCustomerFilters();
        }

        // ì§ì› í•„í„°
        function filterByEmployee() {
            const select = document.getElementById('employee-filter');
            currentEmployeeFilter = select.value;
            applyCustomerFilters();
        }

        // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
        function showCustomerError(message) {
            alert('âŒ ' + message);
        }

        // ì„ì‹œ êµ¬í˜„
        function addNewCustomerRow() { alert('ê³ ê° ì¶”ê°€ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function editCustomer(id) { alert('ê³ ê° í¸ì§‘ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }

        // íŒ€ì¥ìš© ë©”ì´í”Œê´€ë¦¬ í†µê³„ ì—…ë°ì´íŠ¸
        function updateTeamMaeipleStats(data) {
            const properties = data.properties || [];
            const total = properties.length;
            
            // ìƒíƒœë³„ ê°œìˆ˜ ê³„ì‚°
            const statusCounts = {
                'ê±°ë˜ì¤‘': 0,
                'ê±°ë˜ì™„ë£Œ': 0,
                'ë³´ë¥˜': 0,
                'ë¶€ì¬': 0
            };
            
            properties.forEach(property => {
                const status = property.status || 'ë³´ë¥˜';
                if (statusCounts.hasOwnProperty(status)) {
                    statusCounts[status]++;
                }
            });
            
            // ì´ë²ˆ ì£¼ ì‹ ê·œ ë“±ë¡ ê³„ì‚° (í˜„ì¬ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ 7ì¼ ì´ë‚´)
            const now = new Date();
            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            const newThisWeek = properties.filter(property => {
                const createdDate = new Date(property.created_at || property.date_added || now);
                return createdDate >= weekAgo;
            }).length;
            
            // í†µê³„ ì¹´ë“œ ì—…ë°ì´íŠ¸
            document.getElementById('total-maeiple-team').textContent = total;
            document.getElementById('available-maeiple-team').textContent = statusCounts['ê±°ë˜ì¤‘'];
            document.getElementById('completed-maeiple-team').textContent = statusCounts['ê±°ë˜ì™„ë£Œ'];
            document.getElementById('new-maeiple-team').textContent = newThisWeek;
            
            console.log('íŒ€ì¥ìš© ë©”ì´í”Œê´€ë¦¬ í†µê³„ ì—…ë°ì´íŠ¸ ì™„ë£Œ:', statusCounts);
        }

        // ==================== íŒ€ì¥ ì „ìš© í•¨ìˆ˜ë“¤ ====================
        
        // íŒ€ì¥ ë³¸ì¸ ê³ ê° ì¡°íšŒ
        async function loadTeamLeaderCustomers(page = 1) {
            try {
                const url = `/api/team-leader/customers?page=${page}&per_page=20`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.customers) {
                    console.log(`íŒ€ì¥ ë³¸ì¸ ê³ ê° ë¡œë“œ: ${data.customers.length}ê°œ (í˜ì´ì§€ ${page}/${data.total_pages})`);
                    renderTeamLeaderCustomers(data.customers);
                    renderTeamLeaderCustomerPagination(data.total_pages, page);
                    updateTeamLeaderCustomerStats(data.customers);
                } else {
                    console.error('íŒ€ì¥ ë³¸ì¸ ê³ ê° ë°ì´í„° ì˜¤ë¥˜:', data.error);
                    alert('íŒ€ì¥ ë³¸ì¸ ê³ ê°ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('íŒ€ì¥ ë³¸ì¸ ê³ ê° ë¡œë“œ ì˜¤ë¥˜:', error);
                alert('íŒ€ì¥ ë³¸ì¸ ê³ ê°ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ì¡°íšŒ
        async function loadTeamLeaderMaeiple(page = 1) {
            try {
                const url = `/api/team-leader/maeiple?page=${page}&per_page=20`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.success) {
                    console.log(`íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ë¡œë“œ: ${data.properties.length}ê°œ (í˜ì´ì§€ ${page}/${data.total_pages})`);
                    renderTeamLeaderMaeiple(data.properties);
                    renderTeamLeaderMaeiplePagination(data.total_pages, page);
                    updateTeamLeaderMaeipleStats(data.properties);
                } else {
                    console.error('íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ë°ì´í„° ì˜¤ë¥˜:', data.error);
                    alert('íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ë¡œë“œ ì˜¤ë¥˜:', error);
                alert('íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // íŒ€ ì „ì²´ ê³ ê° ì¡°íšŒ
        async function loadTeamCustomers(page = 1) {
            try {
                const url = `/api/team/customers?page=${page}&per_page=20`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.customers) {
                    console.log(`íŒ€ ì „ì²´ ê³ ê° ë¡œë“œ: ${data.customers.length}ê°œ (í˜ì´ì§€ ${page}/${data.total_pages})`);
                    renderTeamCustomers(data.customers);
                    renderTeamCustomerPagination(data.total_pages, page);
                    updateTeamCustomerStats(data.customers);
                } else {
                    console.error('íŒ€ ì „ì²´ ê³ ê° ë°ì´í„° ì˜¤ë¥˜:', data.error);
                    alert('íŒ€ ì „ì²´ ê³ ê°ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('íŒ€ ì „ì²´ ê³ ê° ë¡œë“œ ì˜¤ë¥˜:', error);
                alert('íŒ€ ì „ì²´ ê³ ê°ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // íŒ€ ì „ì²´ ë§¤ë¬¼ ì¡°íšŒ
        async function loadTeamMaeiple(page = 1) {
            try {
                const url = `/api/team/maeiple?page=${page}&per_page=20`;
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.success) {
                    console.log(`íŒ€ ì „ì²´ ë§¤ë¬¼ ë¡œë“œ: ${data.properties.length}ê°œ (í˜ì´ì§€ ${page}/${data.total_pages})`);
                    renderTeamMaeiple(data.properties);
                    renderTeamMaeiplePagination(data.total_pages, page);
                    updateTeamMaeipleStats(data.properties);
                } else {
                    console.error('íŒ€ ì „ì²´ ë§¤ë¬¼ ë°ì´í„° ì˜¤ë¥˜:', data.error);
                    alert('íŒ€ ì „ì²´ ë§¤ë¬¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('íŒ€ ì „ì²´ ë§¤ë¬¼ ë¡œë“œ ì˜¤ë¥˜:', error);
                alert('íŒ€ ì „ì²´ ë§¤ë¬¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // íŒ€ì¥ ë³¸ì¸ ê³ ê° ë Œë”ë§
        function renderTeamLeaderCustomers(customers) {
            const tableContent = document.getElementById('team-leader-customer-table-body');
            if (!tableContent) return;
            
            let tableHTML = '';
            customers.forEach(customer => {
                tableHTML += `
                    <tr>
                        <td>${customer.inquiry_date || ''}</td>
                        <td>${customer.customer_name || ''}</td>
                        <td>${customer.phone || ''}</td>
                        <td>${customer.amount || ''}</td>
                        <td>${customer.room_count || ''}</td>
                        <td>${customer.location || ''}</td>
                        <td>${customer.loan_info || ''}</td>
                        <td>${customer.parking || ''}</td>
                        <td>${customer.pets || ''}</td>
                        <td>${customer.memo || ''}</td>
                        <td>
                            <span class="status-badge ${customer.progress_status === 'ì§„í–‰ì¤‘' ? 'progress' : customer.progress_status === 'ê³„ì•½' ? 'completed' : 'pending'}">
                                ${customer.progress_status || 'ìƒë‹´ì¤‘'}
                            </span>
                        </td>
                        <td>${customer.employee_name || ''}</td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="editTeamLeaderCustomer(${customer.id})">ìˆ˜ì •</button>
                            <button class="btn btn-sm btn-danger" onclick="deleteTeamLeaderCustomer(${customer.id})">ì‚­ì œ</button>
                        </td>
                    </tr>
                `;
            });
            
            tableContent.innerHTML = tableHTML;
        }

        // íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ë Œë”ë§
        function renderTeamLeaderMaeiple(properties) {
            const tableContent = document.getElementById('team-leader-maeiple-table-body');
            if (!tableContent) return;
            
            let tableHTML = '';
            properties.forEach(property => {
                tableHTML += `
                    <tr>
                        <td>${property.check_date || ''}</td>
                        <td>${property.building_number || ''}</td>
                        <td>${property.room_number || ''}</td>
                        <td>
                            <span class="status-badge ${property.status === 'ê±°ë˜ì¤‘' ? 'progress' : property.status === 'ê±°ë˜ì™„ë£Œ' ? 'completed' : 'pending'}">
                                ${property.status || 'ë³´ë¥˜'}
                            </span>
                        </td>
                        <td>${property.jeonse_price || ''}</td>
                        <td>${property.monthly_rent || ''}</td>
                        <td>${property.sale_price || ''}</td>
                        <td>${property.is_occupied ? 'ì…ì£¼ì¤‘' : 'ë¹ˆë°©'}</td>
                        <td>${property.phone || ''}</td>
                        <td>${property.memo || ''}</td>
                        <td>${property.likes || 0}</td>
                        <td>${property.dislikes || 0}</td>
                        <td>${property.employee_name || ''}</td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="editTeamLeaderMaeiple(${property.id})">ìˆ˜ì •</button>
                            <button class="btn btn-sm btn-danger" onclick="deleteTeamLeaderMaeiple(${property.id})">ì‚­ì œ</button>
                        </td>
                    </tr>
                `;
            });
            
            tableContent.innerHTML = tableHTML;
        }

        // íŒ€ ì „ì²´ ê³ ê° ë Œë”ë§
        function renderTeamCustomers(customers) {
            const tableContent = document.getElementById('team-customer-table-body');
            if (!tableContent) return;
            
            let tableHTML = '';
            customers.forEach(customer => {
                tableHTML += `
                    <tr>
                        <td>${customer.inquiry_date || ''}</td>
                        <td>${customer.customer_name || ''}</td>
                        <td>${customer.phone || ''}</td>
                        <td>${customer.amount || ''}</td>
                        <td>${customer.room_count || ''}</td>
                        <td>${customer.location || ''}</td>
                        <td>${customer.loan_info || ''}</td>
                        <td>${customer.parking || ''}</td>
                        <td>${customer.pets || ''}</td>
                        <td>${customer.memo || ''}</td>
                        <td>
                            <span class="status-badge ${customer.progress_status === 'ì§„í–‰ì¤‘' ? 'progress' : customer.progress_status === 'ê³„ì•½' ? 'completed' : 'pending'}">
                                ${customer.progress_status || 'ìƒë‹´ì¤‘'}
                            </span>
                        </td>
                        <td>${customer.employee_name || ''}</td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="editTeamCustomer(${customer.id})">ìˆ˜ì •</button>
                            <button class="btn btn-sm btn-danger" onclick="deleteTeamCustomer(${customer.id})">ì‚­ì œ</button>
                        </td>
                    </tr>
                `;
            });
            
            tableContent.innerHTML = tableHTML;
        }

        // íŒ€ ì „ì²´ ë§¤ë¬¼ ë Œë”ë§
        function renderTeamMaeiple(properties) {
            const tableContent = document.getElementById('team-maeiple-table-body');
            if (!tableContent) return;
            
            let tableHTML = '';
            properties.forEach(property => {
                tableHTML += `
                    <tr>
                        <td>${property.check_date || ''}</td>
                        <td>${property.building_number || ''}</td>
                        <td>${property.room_number || ''}</td>
                        <td>
                            <span class="status-badge ${property.status === 'ê±°ë˜ì¤‘' ? 'progress' : property.status === 'ê±°ë˜ì™„ë£Œ' ? 'completed' : 'pending'}">
                                ${property.status || 'ë³´ë¥˜'}
                            </span>
                        </td>
                        <td>${property.jeonse_price || ''}</td>
                        <td>${property.monthly_rent || ''}</td>
                        <td>${property.sale_price || ''}</td>
                        <td>${property.is_occupied ? 'ì…ì£¼ì¤‘' : 'ë¹ˆë°©'}</td>
                        <td>${property.phone || ''}</td>
                        <td>${property.memo || ''}</td>
                        <td>${property.likes || 0}</td>
                        <td>${property.dislikes || 0}</td>
                        <td>${property.employee_name || ''}</td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="editTeamMaeiple(${property.id})">ìˆ˜ì •</button>
                            <button class="btn btn-sm btn-danger" onclick="deleteTeamMaeiple(${property.id})">ì‚­ì œ</button>
                        </td>
                    </tr>
                `;
            });
            
            tableContent.innerHTML = tableHTML;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
        function updateTeamLeaderCustomerStats(customers) {
            const total = customers.length;
            const progress = customers.filter(c => (c.progress_status || 'ìƒë‹´ì¤‘') === 'ì§„í–‰ì¤‘').length;
            const completed = customers.filter(c => (c.progress_status || '') === 'ê³„ì•½').length;
            
            const weekAgo = new Date();
            weekAgo.setDate(weekAgo.getDate() - 7);
            const newCustomers = customers.filter(c => {
                if (!c.inquiry_date) return false;
                const customerDate = new Date(c.inquiry_date);
                return customerDate >= weekAgo;
            }).length;

            // í†µê³„ ì¹´ë“œ ì—…ë°ì´íŠ¸ (íŒ€ì¥ ë³¸ì¸ ê³ ê°)
            const totalElement = document.getElementById('total-customers-team-leader');
            const progressElement = document.getElementById('progress-customers-team-leader');
            const completedElement = document.getElementById('completed-customers-team-leader');
            const newElement = document.getElementById('new-customers-team-leader');
            
            if (totalElement) totalElement.textContent = total;
            if (progressElement) progressElement.textContent = progress;
            if (completedElement) completedElement.textContent = completed;
            if (newElement) newElement.textContent = newCustomers;
        }

        function updateTeamLeaderMaeipleStats(properties) {
            const total = properties.length;
            const progress = properties.filter(p => p.status === 'ê±°ë˜ì¤‘').length;
            const completed = properties.filter(p => p.status === 'ê±°ë˜ì™„ë£Œ').length;
            
            const now = new Date();
            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            const newThisWeek = properties.filter(property => {
                const createdDate = new Date(property.created_at || property.date_added || now);
                return createdDate >= weekAgo;
            }).length;

            // í†µê³„ ì¹´ë“œ ì—…ë°ì´íŠ¸ (íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼)
            const totalElement = document.getElementById('total-maeiple-team-leader');
            const progressElement = document.getElementById('available-maeiple-team-leader');
            const completedElement = document.getElementById('completed-maeiple-team-leader');
            const newElement = document.getElementById('new-maeiple-team-leader');
            
            if (totalElement) totalElement.textContent = total;
            if (progressElement) progressElement.textContent = progress;
            if (completedElement) completedElement.textContent = completed;
            if (newElement) newElement.textContent = newThisWeek;
        }

        function updateTeamCustomerStats(customers) {
            const total = customers.length;
            const progress = customers.filter(c => (c.progress_status || 'ìƒë‹´ì¤‘') === 'ì§„í–‰ì¤‘').length;
            const completed = customers.filter(c => (c.progress_status || '') === 'ê³„ì•½').length;
            
            const weekAgo = new Date();
            weekAgo.setDate(weekAgo.getDate() - 7);
            const newCustomers = customers.filter(c => {
                if (!c.inquiry_date) return false;
                const customerDate = new Date(c.inquiry_date);
                return customerDate >= weekAgo;
            }).length;

            // í†µê³„ ì¹´ë“œ ì—…ë°ì´íŠ¸ (íŒ€ ì „ì²´ ê³ ê°)
            const totalElement = document.getElementById('total-customers-team');
            const progressElement = document.getElementById('progress-customers-team');
            const completedElement = document.getElementById('completed-customers-team');
            const newElement = document.getElementById('new-customers-team');
            
            if (totalElement) totalElement.textContent = total;
            if (progressElement) progressElement.textContent = progress;
            if (completedElement) completedElement.textContent = completed;
            if (newElement) newElement.textContent = newCustomers;
        }

        // í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§ í•¨ìˆ˜ë“¤
        function renderTeamLeaderCustomerPagination(totalPages, currentPage) {
            const pagination = document.getElementById('team-leader-customer-pagination');
            if (!pagination) return;
            
            let paginationHTML = '';
            for (let i = 1; i <= totalPages; i++) {
                paginationHTML += `
                    <button class="btn btn-sm ${i === currentPage ? 'btn-primary' : 'btn-outline-primary'}" 
                            onclick="loadTeamLeaderCustomers(${i})">${i}</button>
                `;
            }
            pagination.innerHTML = paginationHTML;
        }

        function renderTeamLeaderMaeiplePagination(totalPages, currentPage) {
            const pagination = document.getElementById('team-leader-maeiple-pagination');
            if (!pagination) return;
            
            let paginationHTML = '';
            for (let i = 1; i <= totalPages; i++) {
                paginationHTML += `
                    <button class="btn btn-sm ${i === currentPage ? 'btn-primary' : 'btn-outline-primary'}" 
                            onclick="loadTeamLeaderMaeiple(${i})">${i}</button>
                `;
            }
            pagination.innerHTML = paginationHTML;
        }

        function renderTeamCustomerPagination(totalPages, currentPage) {
            const pagination = document.getElementById('team-customer-pagination');
            if (!pagination) return;
            
            let paginationHTML = '';
            for (let i = 1; i <= totalPages; i++) {
                paginationHTML += `
                    <button class="btn btn-sm ${i === currentPage ? 'btn-primary' : 'btn-outline-primary'}" 
                            onclick="loadTeamCustomers(${i})">${i}</button>
                `;
            }
            pagination.innerHTML = paginationHTML;
        }

        function renderTeamMaeiplePagination(totalPages, currentPage) {
            const pagination = document.getElementById('team-maeiple-pagination');
            if (!pagination) return;
            
            let paginationHTML = '';
            for (let i = 1; i <= totalPages; i++) {
                paginationHTML += `
                    <button class="btn btn-sm ${i === currentPage ? 'btn-primary' : 'btn-outline-primary'}" 
                            onclick="loadTeamMaeiple(${i})">${i}</button>
                `;
            }
            pagination.innerHTML = paginationHTML;
        }

        // í•„í„° í•¨ìˆ˜ë“¤
        function setTeamLeaderCustomerFilter(status, btn) {
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.filter-btn[data-status]').forEach(b => {
                b.classList.remove('active');
            });
            btn.classList.add('active');
            
            // í•„í„°ë§ ë¡œì§ (í•„ìš”ì‹œ êµ¬í˜„)
            console.log('íŒ€ì¥ ë³¸ì¸ ê³ ê° í•„í„°:', status);
        }

        function setTeamLeaderMaeipleFilter(status, btn) {
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.filter-btn[data-status]').forEach(b => {
                b.classList.remove('active');
            });
            btn.classList.add('active');
            
            // í•„í„°ë§ ë¡œì§ (í•„ìš”ì‹œ êµ¬í˜„)
            console.log('íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ í•„í„°:', status);
        }

        function setTeamCustomerFilter(status, btn) {
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.filter-btn[data-status]').forEach(b => {
                b.classList.remove('active');
            });
            btn.classList.add('active');
            
            // í•„í„°ë§ ë¡œì§ (í•„ìš”ì‹œ êµ¬í˜„)
            console.log('íŒ€ ì „ì²´ ê³ ê° í•„í„°:', status);
        }

        function setTeamMaeipleFilter(status, btn) {
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.filter-btn[data-status]').forEach(b => {
                b.classList.remove('active');
            });
            btn.classList.add('active');
            
            // í•„í„°ë§ ë¡œì§ (í•„ìš”ì‹œ êµ¬í˜„)
            console.log('íŒ€ ì „ì²´ ë§¤ë¬¼ í•„í„°:', status);
        }

        // í¸ì§‘/ì‚­ì œ í•¨ìˆ˜ë“¤ (ì„ì‹œ êµ¬í˜„)
        function editTeamLeaderCustomer(id) { alert('íŒ€ì¥ ë³¸ì¸ ê³ ê° ìˆ˜ì • ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function deleteTeamLeaderCustomer(id) { alert('íŒ€ì¥ ë³¸ì¸ ê³ ê° ì‚­ì œ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function editTeamLeaderMaeiple(id) { alert('íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ìˆ˜ì • ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function deleteTeamLeaderMaeiple(id) { alert('íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ì‚­ì œ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function editTeamCustomer(id) { alert('íŒ€ ê³ ê° ìˆ˜ì • ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function deleteTeamCustomer(id) { alert('íŒ€ ê³ ê° ì‚­ì œ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function editTeamMaeiple(id) { alert('íŒ€ ë§¤ë¬¼ ìˆ˜ì • ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function deleteTeamMaeiple(id) { alert('íŒ€ ë§¤ë¬¼ ì‚­ì œ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }

        // ì¶”ê°€ í•¨ìˆ˜ë“¤ (ì„ì‹œ êµ¬í˜„)
        function addNewTeamLeaderCustomerRow() { alert('íŒ€ì¥ ë³¸ì¸ ê³ ê° ì¶”ê°€ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function addNewTeamLeaderMaeipleRow() { alert('íŒ€ì¥ ë³¸ì¸ ë§¤ë¬¼ ì¶”ê°€ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function addNewTeamCustomerRow() { alert('íŒ€ ê³ ê° ì¶”ê°€ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
        function addNewTeamMaeipleRow() { alert('íŒ€ ë§¤ë¬¼ ì¶”ê°€ ê¸°ëŠ¥ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.'); }
    </script>
</body>
</html> 