# 팀장페이지 고객목록 적용 규칙

## 📋 개요
직원페이지(`employee_dashboard.html`)의 고객목록 구성과 API 연동을 팀장페이지(`team_leader_dashboard.html`)에 동일하게 적용하기 위한 규칙입니다.

## 🎯 적용 범위

### 1. HTML 구조 복사
- **대상 섹션**: `customers-tab` 전체 구조
- **테이블 구조**: `customers-table` 클래스 테이블
- **필터 및 검색**: 상태 필터, 날짜 필터, 검색 기능
- **모달**: 메모 편집 모달

### 2. JavaScript 함수 복사
다음 함수들을 팀장페이지에 동일하게 복사:

#### 핵심 함수들
```javascript
// 고객 데이터 관련
- loadCustomers()           // API에서 고객 목록 로드
- displayCustomers()        // 고객 목록 화면 표시
- updateStats()             // 통계 정보 업데이트

// 고객 관리 기능
- addNewRow()              // 새 고객 추가
- editCell()               // 셀 편집
- saveCustomer()           // 고객 정보 저장
- deleteCustomer()         // 고객 삭제

// 검색 및 필터링
- filterCustomers()        // 고객 필터링
- searchCustomers()        // 고객 검색
- applyFilters()          // 필터 적용

// 유틸리티 함수
- formatPhoneNumber()      // 전화번호 포맷팅
- generateCustomerName()   // 자동 고객명 생성
- showAlert()             // 알림 표시
```

#### 모달 관련 함수
```javascript
- openMemoModal()          // 메모 모달 열기
- closeMemoModal()         // 메모 모달 닫기
- saveMemo()              // 메모 저장
```

#### 좋아요 관련 함수
```javascript
- markResidenceLikesChecked()  // 주거사이트 좋아요 확인 처리
- markBusinessLikesChecked()   // 업무사이트 좋아요 확인 처리
```

### 3. CSS 스타일 복사
다음 CSS 클래스들을 팀장페이지에 복사:

```css
/* 테이블 관련 */
.customers-table
.customers-table th
.customers-table td
.customers-table tr:hover

/* 상태 관련 */
.status-badge
.status-complete
.status-hold
.status-progress

/* 필터 관련 */
.filter-container
.filter-btn
.filter-btn.active
.date-filter

/* 검색 관련 */
.search-container
.search-input

/* 편집 관련 */
.editable-cell
.editable-cell:hover
.cell-editing
.edit-input

/* 모달 관련 */
.modal-overlay
.modal-content
.modal-header
.modal-body
.memo-textarea

/* 알림 관련 */
.like-alarm
.empty-state
```

### 4. API 연동 규칙

#### 사용하는 API 엔드포인트
- `GET /api/customers` - 고객 목록 조회
- `POST /api/customers` - 새 고객 추가
- `PUT /api/customers/{id}` - 고객 정보 수정
- `DELETE /api/customers/{id}` - 고객 삭제
- `GET /api/employee/unchecked-likes` - 미확인 좋아요 수 조회

#### API 호출 방식
```javascript
// 고객 목록 조회
const response = await fetch('/api/customers');
const data = await response.json();
customers = Array.isArray(data) ? data : (data.customers || []);

// 고객 정보 저장
const response = await fetch('/api/customers', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(customerData)
});
```

## 🔧 적용 단계

### 단계 1: HTML 구조 복사
1. `employee_dashboard.html`에서 `customers-tab` div 전체를 복사
2. `team_leader_dashboard.html`의 적절한 위치에 붙여넣기
3. 탭 네비게이션에 "고객목록" 탭 버튼 추가

### 단계 2: JavaScript 함수 복사
1. 고객 관련 모든 JavaScript 함수를 복사
2. 전역 변수들 복사 (`customers`, `filteredCustomers` 등)
3. 이벤트 리스너 설정 코드 복사

### 단계 3: CSS 스타일 복사
1. 고객 테이블 관련 모든 CSS 스타일 복사
2. 반응형 스타일도 함께 복사

### 단계 4: 기능 테스트
1. 고객 목록 로드 테스트
2. 필터링 및 검색 기능 테스트
3. 고객 추가/수정/삭제 기능 테스트
4. 모달 기능 테스트

## ⚠️ 주의사항

### 1. 권한 관리
- 팀장은 모든 직원의 고객을 볼 수 있어야 함
- API 호출 시 `all_employees=true` 파라미터 사용 고려

### 2. 데이터 충돌 방지
- 고유 ID 사용 확인
- 전역 변수명 중복 방지

### 3. 성능 고려사항
- 대용량 데이터 처리를 위한 페이지네이션 구현
- 실시간 좋아요 수 조회 최적화

### 4. UI/UX 일관성
- 기존 팀장페이지 디자인과 일관성 유지
- 탭 전환 시 데이터 로딩 처리

## 📝 체크리스트

### HTML 구조
- [ ] `customers-tab` div 복사 완료
- [ ] 테이블 헤더 구조 동일하게 적용
- [ ] 필터 및 검색 UI 복사 완료
- [ ] 메모 모달 구조 복사 완료

### JavaScript 기능
- [ ] 고객 목록 로드 함수 복사
- [ ] 고객 표시 함수 복사
- [ ] 필터링/검색 함수 복사
- [ ] CRUD 기능 함수 복사
- [ ] 모달 관련 함수 복사
- [ ] 이벤트 리스너 설정 완료

### CSS 스타일
- [ ] 테이블 스타일 복사 완료
- [ ] 상태 배지 스타일 복사 완료
- [ ] 필터 UI 스타일 복사 완료
- [ ] 모달 스타일 복사 완료
- [ ] 반응형 스타일 복사 완료

### API 연동
- [ ] 고객 목록 API 연동 테스트
- [ ] 고객 추가 API 연동 테스트
- [ ] 고객 수정 API 연동 테스트
- [ ] 고객 삭제 API 연동 테스트
- [ ] 좋아요 수 조회 API 연동 테스트

### 기능 테스트
- [ ] 고객 목록 로드 정상 작동
- [ ] 필터링 기능 정상 작동
- [ ] 검색 기능 정상 작동
- [ ] 고객 추가 기능 정상 작동
- [ ] 고객 수정 기능 정상 작동
- [ ] 고객 삭제 기능 정상 작동
- [ ] 메모 편집 기능 정상 작동
- [ ] 통계 정보 정상 표시

## 🚀 완료 후 확인사항
1. 모든 기능이 직원페이지와 동일하게 작동하는지 확인
2. 팀장 권한으로 모든 직원의 고객을 볼 수 있는지 확인
3. 성능 이슈가 없는지 확인
4. UI가 기존 팀장페이지와 일관성을 유지하는지 확인

---
*이 규칙을 따라 단계별로 진행하면 직원페이지의 고객목록 기능을 팀장페이지에 완벽하게 복제할 수 있습니다.*

